<!DOCTYPE html>












  


<html class="theme-next mist use-motion" lang="en">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">












<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=6.5.0" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.5.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.5.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.5.0">


  <link rel="mask-icon" href="/images/logo.svg?v=6.5.0" color="#222">









<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '6.5.0',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":true,"onmobile":false},
    fancybox: true,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="Princeton Algorithm course on coursera. Part 1">
<meta name="keywords" content="Programming,Java">
<meta property="og:type" content="article">
<meta property="og:title" content="Algorithms, Part 1">
<meta property="og:url" content="http://yoursite.com/2019/03/10/Algorithms-Part-1/index.html">
<meta property="og:site_name" content="Qingliu">
<meta property="og:description" content="Princeton Algorithm course on coursera. Part 1">
<meta property="og:locale" content="en">
<meta property="og:image" content="https://ws2.sinaimg.cn/large/006tKfTcly1g0w2nx25iwj30jm06yjse.jpg">
<meta property="og:image" content="https://ws3.sinaimg.cn/large/006tKfTcly1g0w31l36egj30nt0j2k6w.jpg">
<meta property="og:image" content="https://ws4.sinaimg.cn/large/006tKfTcly1g0w3d6dfv8j30co09zabx.jpg">
<meta property="og:image" content="https://ws2.sinaimg.cn/large/006tKfTcly1g0xaw2d1qzj30ok03lwfw.jpg">
<meta property="og:image" content="https://ws3.sinaimg.cn/large/006tKfTcly1g0xbfl4c0kj30au06aaav.jpg">
<meta property="og:image" content="https://ws4.sinaimg.cn/large/006tKfTcly1g0xgesix2pj30xn0m511g.jpg">
<meta property="og:image" content="https://ws2.sinaimg.cn/large/006tKfTcly1g0xhbzceq9j310l0ekwl9.jpg">
<meta property="og:image" content="https://ws2.sinaimg.cn/large/006tKfTcgy1g1a6m19n84j30fk0h6wh8.jpg">
<meta property="og:image" content="https://ws3.sinaimg.cn/large/006tKfTcly1g1a6o6h045j30jr0lhdl9.jpg">
<meta property="og:image" content="https://ws2.sinaimg.cn/large/006tKfTcly1g1a85oktmyj30nb0bqwhr.jpg">
<meta property="og:image" content="https://ws2.sinaimg.cn/large/006tKfTcly1g1a8en2iayj30vt0iutex.jpg">
<meta property="og:image" content="https://ws4.sinaimg.cn/large/006tKfTcly1g1a8gkxa8ij30i90jptdz.jpg">
<meta property="og:image" content="https://ws4.sinaimg.cn/large/006tKfTcly1g1b1eimnf3j30rv08bjux.jpg">
<meta property="og:image" content="https://ws2.sinaimg.cn/large/006tKfTcly1g1b1mumo6sj30sj084ad5.jpg">
<meta property="og:image" content="https://ws1.sinaimg.cn/large/006tKfTcly1g1b1zwsg9uj30ma065abq.jpg">
<meta property="og:image" content="https://ws3.sinaimg.cn/large/006tKfTcly1g1b27tqt6mj30st0mj10f.jpg">
<meta property="og:image" content="https://ws4.sinaimg.cn/large/006tKfTcly1g1b2pp0x4hj30ag098js9.jpg">
<meta property="og:image" content="https://ws2.sinaimg.cn/large/006tKfTcly1g1b2v8xwxgj30jm09bgo7.jpg">
<meta property="og:image" content="https://ws4.sinaimg.cn/large/006tKfTcly1g1b2x5yyapj30au09tgmu.jpg">
<meta property="og:image" content="https://ws3.sinaimg.cn/large/006tKfTcly1g1b33pust5j30j20fdaci.jpg">
<meta property="og:image" content="https://ws3.sinaimg.cn/large/006tKfTcly1g1b3a2cjzjj30b708e751.jpg">
<meta property="og:image" content="https://ws2.sinaimg.cn/large/006tKfTcly1g1b3eepjljj30qi06g42n.jpg">
<meta property="og:image" content="https://ws3.sinaimg.cn/large/006tKfTcly1g1c6cuj9zyj30s009f77o.jpg">
<meta property="og:image" content="https://ws2.sinaimg.cn/large/006tKfTcly1g1c6t3ncm3j30pu0ehgsz.jpg">
<meta property="og:image" content="https://ws1.sinaimg.cn/large/006tKfTcly1g1d8shuq7hj30wn0ludp8.jpg">
<meta property="og:image" content="https://ws3.sinaimg.cn/large/006tKfTcly1g1d9kvv8aqj30ee06lt9f.jpg">
<meta property="og:image" content="https://ws2.sinaimg.cn/large/006tKfTcly1g1d9nf4f8qj30f505m3z1.jpg">
<meta property="og:image" content="https://ws1.sinaimg.cn/large/006tKfTcly1g1da8hsgkuj30sc0h7jza.jpg">
<meta property="og:image" content="https://ws3.sinaimg.cn/large/006tKfTcly1g1dnzpm3q4j30dw0dagom.jpg">
<meta property="og:image" content="https://ws1.sinaimg.cn/large/006tKfTcly1g1do64ok5pj30cb0h90wm.jpg">
<meta property="og:image" content="https://ws2.sinaimg.cn/large/006tKfTcly1g1dog1bzv3j30dv0hd0xg.jpg">
<meta property="og:image" content="https://ws3.sinaimg.cn/large/006tKfTcly1g1entk93myj30pa067tbf.jpg">
<meta property="og:image" content="https://ws1.sinaimg.cn/large/006tKfTcly1g1fnwacsmmj30wu0cpgqz.jpg">
<meta property="og:image" content="https://ws3.sinaimg.cn/large/006tKfTcly1g1fzf22o39j30fl0a4wh7.jpg">
<meta property="og:image" content="https://ws2.sinaimg.cn/large/006tKfTcly1g1g00rztt2j30iu0a8gnd.jpg">
<meta property="og:image" content="https://ws3.sinaimg.cn/large/006tKfTcly1g0yd3afksej30ka0bsgov.jpg">
<meta property="og:image" content="https://ws3.sinaimg.cn/large/006tKfTcly1g0yde48g5vj30nb0gdgs4.jpg">
<meta property="og:image" content="https://ws1.sinaimg.cn/large/006tKfTcly1g0ydp9v9ckj30sj06wmzw.jpg">
<meta property="og:image" content="https://ws2.sinaimg.cn/large/006tKfTcly1g0ydtk0xlaj30ge0h478m.jpg">
<meta property="og:image" content="https://ws2.sinaimg.cn/large/006tKfTcly1g0yebsxcraj30dz0esact.jpg">
<meta property="og:image" content="https://ws4.sinaimg.cn/large/006tKfTcly1g0yeeyme4uj30ln0av795.jpg">
<meta property="og:image" content="https://ws2.sinaimg.cn/large/006tKfTcly1g0yej8db99j30ue0i1qc8.jpg">
<meta property="og:image" content="https://ws2.sinaimg.cn/large/006tKfTcly1g0yenl6vckj30vo0d8443.jpg">
<meta property="og:image" content="https://ws4.sinaimg.cn/large/006tKfTcly1g13eil2g5ij30fc0itdib.jpg">
<meta property="og:image" content="https://ws1.sinaimg.cn/large/006tKfTcly1g13et5rhmvj30xj0em0x2.jpg">
<meta property="og:image" content="https://ws1.sinaimg.cn/large/006tKfTcly1g13es1t253j30xm0ey0wn.jpg">
<meta property="og:image" content="https://ws3.sinaimg.cn/large/006tKfTcly1g13friuhaaj30o90duq6b.jpg">
<meta property="og:image" content="https://ws4.sinaimg.cn/large/006tKfTcly1g13gi5ehrlj30vf0dojtf.jpg">
<meta property="og:image" content="https://ws3.sinaimg.cn/large/006tKfTcly1g13glc65gbj30we0pewlm.jpg">
<meta property="og:image" content="https://ws1.sinaimg.cn/large/006tKfTcly1g1g164xduhj30zg0mb11h.jpg">
<meta property="og:image" content="https://ws4.sinaimg.cn/large/006tKfTcly1g1g1ngvns8j30kx0f4whb.jpg">
<meta property="og:image" content="https://ws2.sinaimg.cn/large/006tKfTcly1g1g1v6g6iaj30dr0gbgnk.jpg">
<meta property="og:image" content="https://ws1.sinaimg.cn/large/006tKfTcly1g1g3ffe3xzj30hw086jta.jpg">
<meta property="og:image" content="https://ws3.sinaimg.cn/large/006tKfTcly1g1g3gd9fznj30u103qwfy.jpg">
<meta property="og:image" content="https://ws2.sinaimg.cn/large/006tKfTcly1g1g3ge1nh0j30fp05nwf9.jpg">
<meta property="og:image" content="https://ws4.sinaimg.cn/large/006tKfTcly1g1g3m3lj45j30ek0c2ad6.jpg">
<meta property="og:updated_time" content="2019-03-26T04:49:56.556Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Algorithms, Part 1">
<meta name="twitter:description" content="Princeton Algorithm course on coursera. Part 1">
<meta name="twitter:image" content="https://ws2.sinaimg.cn/large/006tKfTcly1g0w2nx25iwj30jm06yjse.jpg">






  <link rel="canonical" href="http://yoursite.com/2019/03/10/Algorithms-Part-1/">



<script type="text/javascript" id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>Algorithms, Part 1 | Qingliu</title>
  











  <noscript>
  <style type="text/css">
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion {
      .logo-line-before i { left: initial; }
      .logo-line-after i { right: initial; }
    }
  </style>
</noscript>

</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

<a href="https://github.com/Aden-Q" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewbox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"/><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"/><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"/></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Qingliu</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="Toggle navigation bar">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>Home</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-about">

    
    
    
      
    

    

    <a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i> <br>About</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
    
      
    

    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>Tags</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">

    
    
    
      
    

    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>Categories</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>Archives</a>

  </li>

      
      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>Search</a>
        </li>
      
    </ul>
  

  
    

  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="Searching..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/03/10/Algorithms-Part-1/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Qingliu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Qingliu">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Algorithms, Part 1
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-03-10 14:06:34" itemprop="dateCreated datePublished" datetime="2019-03-10T14:06:34-05:00">2019-03-10</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-03-25 23:49:56" itemprop="dateModified" datetime="2019-03-25T23:49:56-05:00">2019-03-25</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/Note/" itemprop="url" rel="index"><span itemprop="name">Note</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2019/03/10/Algorithms-Part-1/" class="leancloud_visitors" data-flag-title="Algorithms, Part 1">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">Heat: </span>
               
                 <span class="leancloud-visitors-count"></span>
                 <span>℃</span>
             </span>
          

          
            <span class="post-meta-divider">|</span>
            <span class="post-meta-item-icon">
            <i class="fa fa-eye"></i>
             Views:  
            <span class="busuanzi-value" id="busuanzi_value_page_pv"></span>
            </span>
          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>Princeton Algorithm course on coursera. Part 1</p>
<a id="more"></a>
<p>Cover:</p>
<ul>
<li>Disjoint set</li>
<li>Analysis of Algorithms</li>
<li>Stack and Queue</li>
<li>Elementary Sorts</li>
<li>Mergesort</li>
<li>Quicksort</li>
<li>Priority Queue</li>
<li>Elementary Symbol Tables</li>
<li>BST</li>
<li>Hash Table</li>
</ul>
<p>Learning Purpose: </p>
<ul>
<li>Being familiar with Java. </li>
<li>Having fun with algorithms.</li>
</ul>
<p>Reference Books:</p>
<ul>
<li><a href="https://algs4.cs.princeton.edu/home/" target="_blank" rel="noopener">Algorithms, 4th Edition</a></li>
<li><a href="https://introcs.cs.princeton.edu/java/home/" target="_blank" rel="noopener">Computer Science:   An Interdisciplinary Approach</a></li>
</ul>
<h1 id="Week-1"><a href="#Week-1" class="headerlink" title="Week 1"></a>Week 1</h1><h2 id="Why-study-algorithms"><a href="#Why-study-algorithms" class="headerlink" title="Why study algorithms"></a>Why study algorithms</h2><p><em>“Great algorithms are the poetry of computation.” — Francis Sullivan</em></p>
<p><em>“Algorithms + Data Structures = Programs.” — Niklaus Wirth</em></p>
<h2 id="Union-Find"><a href="#Union-Find" class="headerlink" title="Union-Find"></a>Union-Find</h2><p>Steps to developing a usable algorithm</p>
<ul>
<li>Model the problem.</li>
<li><p>Find an algorithm to solve it.</p>
</li>
<li><p>Fast enough? Fits in memory?</p>
</li>
<li>If not, figure out why.</li>
<li>Find a way to address the problem.</li>
<li>Iterate until satisfied.</li>
</ul>
<h3 id="dynamic-connectivity"><a href="#dynamic-connectivity" class="headerlink" title="dynamic connectivity"></a>dynamic connectivity</h3><p>Given a set of N objects.</p>
<ul>
<li>Union command: connect two objects</li>
<li>Find/conneted query: is there a path connecting the two objects?</li>
</ul>
<center><br>    <img src="https://ws2.sinaimg.cn/large/006tKfTcly1g0w2nx25iwj30jm06yjse.jpg" style="zoom:60%"><br></center>





<p><u><strong>Connectivity example</strong></u></p>
<font color="blue">Q. Is there a path connecting <em>p</em> and <em>q</em>?</font>

<center><br>    <img src="https://ws3.sinaimg.cn/large/006tKfTcly1g0w31l36egj30nt0j2k6w.jpg" style="zoom:60%"><br></center>



<p>Some common understandings:</p>
<ul>
<li>Reflexive: <em>p</em> is connected to <em>p</em> itself.</li>
<li>Symmetric: if <em>p</em> is connected to <em>q</em>, then <em>q</em> is connected to <em>p</em>.</li>
<li>Transitive: if <em>p</em> is connected to <em>q</em> and <em>q</em> is connected to <em>r</em>, then <em>p</em> is connected to <em>r</em>.</li>
</ul>
<p><strong>Connected components.</strong> Maximal set of objects that are mutually connected.</p>
<p>e.g.</p>
<center><br>    <img src="https://ws4.sinaimg.cn/large/006tKfTcly1g0w3d6dfv8j30co09zabx.jpg" style="zoom:60%"><br>    </center>


<p>​    </p>
<p><font color="blue"> Goal. </font> Design efficient data structure for union-find.</p>
<ul>
<li>Number of objects <em>N</em> can be huge.</li>
<li>Number of operations <em>M</em> can be huge.</li>
<li>Find queries and union commands may be intermixed.</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// API</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UF</span> </span>&#123;</span><br><span class="line">    UF(<span class="keyword">int</span> N)	<span class="comment">// initialize union-find data structure with N objects (0 to N-1)</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">union</span><span class="params">(<span class="keyword">int</span> p, <span class="keyword">int</span> q)</span>	<span class="comment">// add connection between p and q</span></span></span><br><span class="line"><span class="function">    <span class="keyword">boolean</span> <span class="title">connected</span><span class="params">(<span class="keyword">int</span> p, <span class="keyword">int</span> q)</span>	<span class="comment">// are p and q the same component?</span></span></span><br><span class="line"><span class="function">    <span class="keyword">int</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> p)</span>	<span class="comment">//component identifier for p (0 to N-1)</span></span></span><br><span class="line"><span class="function">    <span class="keyword">int</span> <span class="title">count</span><span class="params">()</span>	<span class="comment">// number of components</span></span></span><br><span class="line"><span class="function">&#125;</span></span><br></pre></td></tr></table></figure>
<h3 id="quick-find"><a href="#quick-find" class="headerlink" title="quick find"></a>quick find</h3><p>Data structure</p>
<ul>
<li>Integer array id[] of size N.</li>
<li>Interpretation: <em>p</em> and <em>q</em> are connected iff they have the same id.</li>
</ul>
<center><br><img src="https://ws2.sinaimg.cn/large/006tKfTcly1g0xaw2d1qzj30ok03lwfw.jpg" style="zoom:60%"><br></center>

<p>Find: Check if <em>p</em> and <em>q</em> have the same id</p>
<p>Union: To merge components containing <em>p</em> and <em>q</em>, change all entries whose id equals id[p] to id[q]. Costly.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">QuickFindUF</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span>[] id;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">QuickFindUF</span><span class="params">(<span class="keyword">int</span> N)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        id = <span class="keyword">new</span> <span class="keyword">int</span>[N];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++)</span><br><span class="line">            id[i] = i;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">connected</span><span class="params">(<span class="keyword">int</span> p, <span class="keyword">int</span> q)</span></span></span><br><span class="line"><span class="function">    </span>&#123;	<span class="keyword">return</span> id[p] == id[q]; &#125;</span><br><span class="line">	</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">union</span><span class="params">(<span class="keyword">int</span> p, <span class="keyword">int</span> q)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> pid = id[p];</span><br><span class="line">        <span class="keyword">int</span> qid = idp[q];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; id.length; i++)</span><br><span class="line">            <span class="keyword">if</span> (id[i] == pid) id[i] = qid;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<table>
<thead>
<tr>
<th>algorithm</th>
<th>initialize</th>
<th>union</th>
<th>find</th>
</tr>
</thead>
<tbody>
<tr>
<td>quick-find</td>
<td>N</td>
<td>N</td>
<td>1</td>
</tr>
</tbody>
</table>
<p>N union commands on N object: quadratic time. Much too slow.</p>
<p>Quadratic algorithms don’t scale with technology.</p>
<h3 id="quick-union"><a href="#quick-union" class="headerlink" title="quick union"></a>quick union</h3><p>Data structure</p>
<ul>
<li>Integer array id[] of size N.</li>
<li>Interpretation: id[i] is parent of i.</li>
<li>Root of i is id[id[id[…id[i]…]]].</li>
</ul>
<center><br><img src="https://ws3.sinaimg.cn/large/006tKfTcly1g0xbfl4c0kj30au06aaav.jpg" style="zoom:60%"><br></center>

<p>Each root represents the connected components.</p>
<p>Find: Check if <em>p</em> and <em>q</em> have the same root.</p>
<p>Union: To merge components containing <em>p</em> and <em>q</em>, set the id of p’s root to the id of q’s root.</p>
<p>(path compression)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">QuickUnionUF</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span>[] id;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">QuickUnionUF</span><span class="params">(<span class="keyword">int</span> N)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        id = <span class="keyword">new</span> <span class="keyword">int</span>[N];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++)	id[i] = i;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">root</span><span class="params">(<span class="keyword">int</span> i)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">while</span> (i != id[i])	i = id[i];</span><br><span class="line">        <span class="keyword">return</span> i;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">connected</span><span class="params">(<span class="keyword">int</span> p, <span class="keyword">int</span> q)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> root(p) == root(q);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">union</span><span class="params">(<span class="keyword">int</span> p, <span class="keyword">int</span> q)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> i = root(p);</span><br><span class="line">        <span class="keyword">int</span> j = root(q);</span><br><span class="line">        id[i] = j;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<p>Worst case:</p>
<table>
<thead>
<tr>
<th>algorithm</th>
<th>initialize</th>
<th>union</th>
<th>find</th>
</tr>
</thead>
<tbody>
<tr>
<td>Quick-union</td>
<td>N</td>
<td>N</td>
<td>N</td>
</tr>
</tbody>
</table>
<p>Quick-union defect</p>
<ul>
<li>Trees can get tall</li>
<li>Find too expensive (could be N array accesses).</li>
</ul>
<h3 id="improvements"><a href="#improvements" class="headerlink" title="improvements"></a>improvements</h3><h4 id="Improvement-1-weighting"><a href="#Improvement-1-weighting" class="headerlink" title="Improvement 1: weighting"></a>Improvement 1: weighting</h4><hr>
<p>Weighted quick-union</p>
<ul>
<li>Modify quick-union to avoid tall trees.</li>
<li>Keep track of size of each tree (number of objects).</li>
<li>Balance by linking root of smaller tree to root of larger tree.</li>
</ul>
<p>Data structure： Same as quick-union, but maintain extra array sz[i] to count number of objects in the tree rooted at i.</p>
<p>Find: Identical to quick-union. <code>return root(p) == root(q)</code></p>
<p>Union: Modify quick-union to:</p>
<ul>
<li>Link root of samller tree to root of larger tree.</li>
<li>Update the sz[] array.</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> i = root(p);</span><br><span class="line">itn j = root(q);</span><br><span class="line"><span class="keyword">if</span> (i == j) <span class="keyword">return</span>;</span><br><span class="line"><span class="keyword">if</span> (sz[i] &lt; sz[j])	&#123; id[i] = j; sz[j] += sz[i]; &#125;</span><br><span class="line"><span class="keyword">else</span>				&#123; id[j] = i; sz[i] += sz[j]; &#125;</span><br></pre></td></tr></table></figure>
<hr>
<p>Proposition: Depth of any node x is at most  $lg N$</p>
<table>
<thead>
<tr>
<th>algorithm</th>
<th>initialize</th>
<th>union</th>
<th>find</th>
</tr>
</thead>
<tbody>
<tr>
<td>Weighted QU</td>
<td>N</td>
<td>lg N</td>
<td>Lg N</td>
</tr>
</tbody>
</table>
<h4 id="Improvement-2-path-compression"><a href="#Improvement-2-path-compression" class="headerlink" title="Improvement 2: path compression"></a>Improvement 2: path compression</h4><p>Quick union with path compression: Just after computing the root of p, set the id of each examined node to point to that root.</p>
<p>Two-pass implementation: add second loop to root() to set the id[] of each examined node to the root.</p>
<p>Simpler one-pass variant: Make every other node in path point to its grandparent (thereby halving path length).</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// variant</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">root</span><span class="params">(<span class="keyword">int</span> i)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">while</span> (i != id[i])</span><br><span class="line">    &#123;</span><br><span class="line">        id[i] = id[id[i]]</span><br><span class="line">            i = id[i]</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> i;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<p>Weighted QU + path compression: worst-case time is N + M lg* N</p>
<p>(lg * is an iterate function, plz refer to slide for more information)</p>
<h3 id="applications"><a href="#applications" class="headerlink" title="applications"></a>applications</h3><ul>
<li>Percolation</li>
<li>Games (Go, Hex)</li>
<li>Dynamic connectivity</li>
<li>Least common ancestor</li>
<li>Equivalence of finite state automata</li>
<li>Hoshen-Kopelman algorithm in physics</li>
<li>Hinley-Milner polymorphic type inference</li>
<li>Kruskal’s minimum spanning tree algorithm</li>
<li>Compiling equivalence statements in Fortran</li>
<li>Morphological attribute openings and closings</li>
<li><p>Matlab’s <code>bwlabel()</code> function in image processing</p>
</li>
<li><p>Subroutine of many other algorithms</p>
</li>
</ul>
<h3 id="Programming-Assignment-1"><a href="#Programming-Assignment-1" class="headerlink" title="Programming Assignment 1"></a>Programming Assignment 1</h3><p>Problem:</p>
<p><a href="http://coursera.cs.princeton.edu/algs4/assignments/percolation.html" target="_blank" rel="noopener">Programming Assignment 1</a></p>
<p>Code is on my Github page:</p>
<p><a href="https://github.com/Aden-Q/Percolation" target="_blank" rel="noopener">Percolation</a></p>
<p>Missing the optional task of running time analysis, but I don’t want to do it again because this task is somewhat discouraging for some beginners I think.</p>
<h2 id="Analysis-of-Algorithms"><a href="#Analysis-of-Algorithms" class="headerlink" title="Analysis of Algorithms"></a>Analysis of Algorithms</h2><h3 id="observations"><a href="#observations" class="headerlink" title="observations"></a>observations</h3><p>Analytic Engine</p>
<p>Reasons to analyze algorithms</p>
<ul>
<li>Predict performance</li>
<li>Compare algorithms</li>
<li>Provide guarantees</li>
<li>Understand theoretical basis</li>
</ul>
<p>Primary practical reason: avoid performance bugs.</p>
<p>Discrete Fourier transform</p>
<p>N-body simulation</p>
<p>Scientific method</p>
<ul>
<li>Observe</li>
<li>Hypothesize</li>
<li>Predict</li>
<li>Verify</li>
<li>Validate</li>
</ul>
<p>Principles</p>
<ul>
<li>Experiments must be reproducible</li>
<li>Hypotheses must be falsifiable</li>
</ul>
<p>3-sum problem</p>
<p>Standard plot on running time</p>
<p>Log-log scale strategy</p>
<p>Doubling hypothesis: run program, doubling the size of the input.</p>
<p>System independent effects</p>
<ul>
<li>Algorithm</li>
<li>Input data</li>
</ul>
<p>System dependent effects</p>
<ul>
<li>Hardware: CPU, memory, cache</li>
<li>Software: compiler, interpreter, garbage collector</li>
<li>System: operating system, network, other apps</li>
</ul>
<h3 id="mathematical-models"><a href="#mathematical-models" class="headerlink" title="mathematical models"></a>mathematical models</h3><p>Total running time: sum of cost * frequency for all operations</p>
<p>General concepts</p>
<p>1-sum problem</p>
<p>2-sum problem</p>
<p>tilde notation</p>
<p>Estimating a discrete sum</p>
<h3 id="order-of-growth-classification"><a href="#order-of-growth-classification" class="headerlink" title="order-of-growth classification"></a>order-of-growth classification</h3><p>$1,  log N, N, N lgN, N^2, N^3, 2^N$</p>
<center><br><img src="https://ws4.sinaimg.cn/large/006tKfTcly1g0xgesix2pj30xn0m511g.jpg" style="zoom:60%"><br></center>

<p>Recurence</p>
<p>Easy concepts</p>
<h3 id="theory-of-algorithms"><a href="#theory-of-algorithms" class="headerlink" title="theory of algorithms"></a>theory of algorithms</h3><p>Best case: Lower bound on cost</p>
<ul>
<li>Determined by “easiest” input</li>
<li>Provides a goal for all inputs</li>
</ul>
<p>Worst case: Upper bound on cost</p>
<ul>
<li>Determined by “most difficult” input</li>
<li>Provides a way to predict performance</li>
</ul>
<p>Average case: Expected cost for random input</p>
<ul>
<li>Need a model for “random” input</li>
<li>Provides a way to predict performance</li>
</ul>
<p>Actual data</p>
<ul>
<li>Need to understand input to effectively process it</li>
<li>Approach 1: design for the worst case</li>
<li>Approach 2: randomize, depend on probailistic guarantee</li>
</ul>
<p>Goals</p>
<ul>
<li>Establish “difficulty” of a problem</li>
<li>Develop “optimal” algorithms</li>
</ul>
<p>Approach</p>
<ul>
<li>Suppress details in analyze “to within a constant factor”</li>
<li>Eliminate variability in input model by focusing on the worst case</li>
</ul>
<p>Algorithm design approach</p>
<hr>
<p>Start</p>
<ul>
<li>Develop an algorithm</li>
<li>Prove a lower bound</li>
</ul>
<p>Gap?</p>
<ul>
<li>Lower the upper bound (discover a new algorithm)</li>
<li>Raise the lower bound (more difficult)</li>
</ul>
<h3 id="memory"><a href="#memory" class="headerlink" title="memory"></a>memory</h3><p>Bit</p>
<p>Byte</p>
<p>Megabyte (MB)</p>
<p>Gigabyte (GB)</p>
<p>Old machine: We used to assume a 32-bit machine with 4 byte pointers</p>
<p>Modern machine: We now assume a 64-bit machine with 8 byte pointers</p>
<p>Typical memory usage for objects in Java</p>
<ul>
<li>Object overhead: 16 bytes</li>
<li>Reference: 8 bytes</li>
<li>Padding: Each object uses a multiple of 8 bytes</li>
</ul>
<center><br><img src="https://ws2.sinaimg.cn/large/006tKfTcly1g0xhbzceq9j310l0ekwl9.jpg" style="zoom:60%"><br></center>





<h1 id="Week-2"><a href="#Week-2" class="headerlink" title="Week 2"></a>Week 2</h1><h2 id="Stacks-and-Queues"><a href="#Stacks-and-Queues" class="headerlink" title="Stacks and Queues"></a>Stacks and Queues</h2><p>Fundamental data types.</p>
<ul>
<li>Value: collection of objects</li>
<li>Operations: insert, remove, iterate, test if empty</li>
<li>Intent is clear when we insert</li>
<li>Which item do we remove</li>
</ul>
<hr>
<p>Modular programming:</p>
<p>Seperate interface and implementation</p>
<p>Benefits.</p>
<ul>
<li>Client can’t know details of implementation</li>
<li>Implementation can’t know details of client needs</li>
<li>Design: creates modular, reusable libraries</li>
<li>Performance: useoptimized implementation where it matters</li>
</ul>
<h3 id="stacks"><a href="#stacks" class="headerlink" title="stacks"></a>stacks</h3><p>LIFO, examine the item most recently added.</p>
<p>push, pop</p>
<p>API.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StackOfStrings</span></span>&#123;</span><br><span class="line">    StackOfStrings()	<span class="comment">// create an empty stack</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">push</span><span class="params">(String item)</span>	<span class="comment">//insert a new string onto stack</span></span></span><br><span class="line"><span class="function">    String <span class="title">pop</span><span class="params">()</span>	<span class="comment">// remove and return the string most recently added</span></span></span><br><span class="line"><span class="function">    <span class="keyword">boolean</span> <span class="title">isEmpty</span><span class="params">()</span>	<span class="comment">// is the stack empty?</span></span></span><br><span class="line"><span class="function">    <span class="keyword">int</span> <span class="title">size</span><span class="params">()</span>	<span class="comment">// number of strings on the stack</span></span></span><br><span class="line"><span class="function">&#125;</span></span><br></pre></td></tr></table></figure>
<p>Linked-list representation </p>
<hr>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// inner class</span></span><br><span class="line"><span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">Node</span> </span>&#123;</span><br><span class="line">    String item;</span><br><span class="line">    Node next;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Pop:</p>
<center><br><img src="https://ws2.sinaimg.cn/large/006tKfTcgy1g1a6m19n84j30fk0h6wh8.jpg" style="zoom:60%"><br></center>

<p>Push:</p>
<center><br><img src="https://ws3.sinaimg.cn/large/006tKfTcly1g1a6o6h045j30jr0lhdl9.jpg" style="zoom:60%"><br></center>



<p>Array implementation</p>
<hr>
<ul>
<li>Use array s[] to store N items on stack.</li>
<li>push(): add new item at s[N].</li>
<li>pop(): remove item from s[N-1].</li>
</ul>
<p>Defect: Stack overflows when N exceeds capacity.</p>
<p>Full implementation:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FixedCapacityStackOfStrings</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String[] s;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> N = <span class="number">0</span>;</span><br><span class="line">  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">FixedCapacityStackOfStrings</span><span class="params">(<span class="keyword">int</span> capacity)</span></span></span><br><span class="line"><span class="function">    </span>&#123; s = <span class="keyword">new</span> String[capacity]; &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isEmpty</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123; <span class="keyword">return</span> N == <span class="number">0</span>; &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">push</span><span class="params">(String item)</span></span></span><br><span class="line"><span class="function">    </span>&#123; s[N++] = item; &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">pop</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123; <span class="keyword">return</span> s[--N]; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Stack considerations:</p>
<p>Overflow and underflow</p>
<ul>
<li>Underflow: throw exception if pop from an empty stack.</li>
<li>Overflow: use resizing array for array implementation.</li>
</ul>
<p>Null items: We allow null items to be inserted.</p>
<p>Loitering: Holding a reference to an object when it is no longer needed.</p>
<p>To avoid the problem caused by loitering, we need to remove the pointer and free the memory:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// the version avoids "loitering" garbage collector can reclaim memory only</span></span><br><span class="line"><span class="comment">// if no outstanding references</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">pop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  String item = s[--N];</span><br><span class="line">  s[N] = <span class="keyword">null</span>;</span><br><span class="line">  <span class="keyword">return</span> item;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="resizing-arrays"><a href="#resizing-arrays" class="headerlink" title="resizing arrays"></a>resizing arrays</h3><p>Problem. Requiring client to provide capacity does not implement API</p>
<p>First try:</p>
<ul>
<li>push(): increase size of array s[] by 1.</li>
<li>pop(): decrease size of array s[] by 1.</li>
</ul>
<p>Too expensive</p>
<ul>
<li>Need to copy all item to a new array.</li>
<li>Inserting first N items takes time proportional to 1+2+…+N</li>
</ul>
<hr>
<p>Repeated doubling: If the array is full, create a new array of twice the size, and copy items</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">ResizingArrayStackOfStrings</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123; s = <span class="keyword">new</span> String[<span class="number">1</span>]; &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">push</span><span class="params">(String item)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (N == s.length) resize(<span class="number">2</span> * s.length);</span><br><span class="line">  	s[N++] = item;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">resize</span><span class="params">(<span class="keyword">int</span> capacity)</span> </span>&#123;</span><br><span class="line">      String[] copy = <span class="keyword">new</span> String[capacity];</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++)</span><br><span class="line">        copy[i] = s[i];</span><br><span class="line">      s = copy;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Efficient solution for shrinking an array: halve size of array s[] when array is <strong>one-quarter</strong> full.</p>
<p>Invariant: Array is between 25% and 100% full.</p>
<p>Amortized analysis: Average running time per operation over a worst-case sequence of operations.</p>
<p>Proposition: Starting from an empty stack, any sequence of M push and pop operations takes time proportional to M.</p>
<center><br><img src="https://ws2.sinaimg.cn/large/006tKfTcly1g1a85oktmyj30nb0bqwhr.jpg" style="zoom:60%"><br></center>

<p>Tradeoffs:</p>
<p>Linked-list implementation</p>
<ul>
<li>Every operation takes constant time in the worst case.</li>
<li>Uses extra time and space to deal with the links.</li>
</ul>
<p>Resizing-array implementation.</p>
<ul>
<li>Every operation takes constant amortized time.</li>
<li>Less wasted space.</li>
</ul>
<h3 id="queues"><a href="#queues" class="headerlink" title="queues"></a>queues</h3><p>FIFO, examine the item least recently added.</p>
<p>enqueue, dequeue</p>
<p>API:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">QueueOfStrings</span> </span>&#123;</span><br><span class="line">    QueueOfStrings();	<span class="comment">// create an empty queue</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">enqueue</span><span class="params">(String item)</span></span>;	<span class="comment">// insert a new string onto queue</span></span><br><span class="line">    <span class="function">String <span class="title">dequeue</span><span class="params">()</span></span>;	<span class="comment">// remove and return the string least recently added</span></span><br><span class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">isEmpty</span><span class="params">()</span></span>;	<span class="comment">// is the queue empty?</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">size</span><span class="params">()</span></span>;	<span class="comment">// number of strings on the queue</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Linked-list representation</p>
<hr>
<p>Maintain pointer to first and last nodes in a linked list;</p>
<p>Insert/remove from opposite ends</p>
<center><br><img src="https://ws2.sinaimg.cn/large/006tKfTcly1g1a8en2iayj30vt0iutex.jpg" style="zoom:60%"><br></center>

<p>Enqueue:</p>
<center><br><img src="https://ws4.sinaimg.cn/large/006tKfTcly1g1a8gkxa8ij30i90jptdz.jpg" style="zoom:60%"><br></center>

<p>Array implementation of a queue</p>
<hr>
<ul>
<li>Use array q[] to store items in queue.</li>
<li>enqueue(): add new item at q[tail].</li>
<li>dequeue(): remove item from q[head].</li>
<li>Update head and tail modulo the capacity</li>
<li>Add resizing array.</li>
</ul>
<h3 id="generics"><a href="#generics" class="headerlink" title="generics"></a>generics</h3><p>Java generics</p>
<ul>
<li>Avoid casting in client.</li>
<li>Discover type mismatch errors at compile-time instead of run-time.</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Stack&lt;Apple&gt; s = <span class="keyword">new</span> Stack&lt;Apple&gt;();</span><br><span class="line">Apple a = <span class="keyword">new</span> Apple();</span><br><span class="line">Orange b = <span class="keyword">new</span> Orange();</span><br><span class="line">s.push(a);</span><br><span class="line">s.push(b);	<span class="comment">// compile-time error</span></span><br><span class="line">a = s.pop();</span><br></pre></td></tr></table></figure>
<p>Guilding principles: Welcome compile-time errors; avoid run-time errors.</p>
<p>Full implementation (Linked-list version):</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Stack</span>&lt;<span class="title">Item</span>&gt;</span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> Node first = <span class="keyword">null</span>;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">Node</span></span></span><br><span class="line"><span class="class">	</span>&#123;</span><br><span class="line">		Item item;</span><br><span class="line">  		Node next;</span><br><span class="line">  	&#125;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isEmpty</span><span class="params">()</span></span></span><br><span class="line"><span class="function">  </span>&#123; <span class="keyword">return</span> first == <span class="keyword">null</span>; &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">push</span><span class="params">(Item item)</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">  	  Node oldfirst = first;</span><br><span class="line">  	  first = <span class="keyword">new</span> Node();</span><br><span class="line">  	  first.item = item;</span><br><span class="line">  	  first.next = oldfirst;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">public</span> Item <span class="title">pop</span><span class="params">()</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">  	  Item item = first.item;</span><br><span class="line">  	  first = first.next;</span><br><span class="line">  	  <span class="keyword">return</span> item;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Wrapper type.</p>
<ul>
<li>Each primitive type has a wrapper object type.</li>
<li>Ex: Integer is wrapper type for int.</li>
</ul>
<p>Autoboxing: Automatic case between a primitive type and its wrapper.</p>
<p>Syntactic sugar: Behind-the-scenes casting.</p>
<p>Bottom line: Client code can use generic stack for any type of data.</p>
<h3 id="iterators"><a href="#iterators" class="headerlink" title="iterators"></a>iterators</h3><p>Design challenge: Support iteration over stack items by client, without revealing the internal representation of the stack.</p>
<p>Java solution: Make stack implement the <strong>Iterable</strong> interface.</p>
<p>An <strong>Iterable</strong> has a method that returns an <strong>Iterator</strong>.</p>
<p>Iterable interface:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Iterable</span>&lt;<span class="title">Item</span>&gt;</span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">	<span class="function">Iterator&lt;Item&gt; <span class="title">iterator</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>An <strong>Iterator</strong> has methods <strong>hasNext()</strong> and <strong>next()</strong>.</p>
<p>Iterator interface:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Iterator</span>&lt;<span class="title">Item</span>&gt;</span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">boolean</span> <span class="title">hasNext</span><span class="params">()</span></span>;</span><br><span class="line">	<span class="function">Item <span class="title">next</span><span class="params">()</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">remove</span><span class="params">()</span></span>;	<span class="comment">// optional</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>“foreach” statement:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (String s : stack)</span><br><span class="line">	StdOut.println(s);</span><br></pre></td></tr></table></figure>
<p>Equivalent code:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Iterator&lt;String&gt; i = stack.iterator();</span><br><span class="line"><span class="keyword">while</span>(i.hasNext())</span><br><span class="line">&#123;</span><br><span class="line">    String s = i.next();</span><br><span class="line">    StdOut.println(s);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Example:</p>
<p>Stack iterator: linked-list implementation</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Iterator;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Stack</span>&lt;<span class="title">Item</span>&gt; <span class="keyword">implements</span> <span class="title">Iterable</span>&lt;<span class="title">Item</span>&gt;</span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">	...</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> Iterator&lt;Item&gt; <span class="title">iterator</span><span class="params">()</span>	</span>&#123; <span class="keyword">return</span> <span class="keyword">new</span> ListIterator(); &#125;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">ListIterator</span> <span class="keyword">implements</span> <span class="title">Iterator</span>&lt;<span class="title">Item</span>&gt;</span></span><br><span class="line"><span class="class">    </span>&#123;</span><br><span class="line">  	<span class="keyword">private</span> Node current = first;</span><br><span class="line">  	</span><br><span class="line">  	<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">hasNext</span><span class="params">()</span> </span>&#123; <span class="keyword">return</span> current != <span class="keyword">null</span>; &#125;</span><br><span class="line">  	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">remove</span><span class="params">()</span>	</span>&#123; <span class="comment">/* not supported */</span> &#125;</span><br><span class="line">  	<span class="function"><span class="keyword">public</span> Item <span class="title">next</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">    	Item item = current.item;</span><br><span class="line">    	current = current.next;</span><br><span class="line">    	<span class="keyword">return</span> item;</span><br><span class="line">    &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Bag API</p>
<hr>
<p>Main application: Adding items to a collection and iterating (when order doesn’t matter).</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Bag</span>&lt;<span class="title">Item</span>&gt; <span class="keyword">implements</span> <span class="title">Iterable</span>&lt;<span class="title">Item</span>&gt;</span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">	Bag();	<span class="comment">// create an empty bag</span></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(Item x)</span></span>;	<span class="comment">// insert a new item onto bag</span></span><br><span class="line">	<span class="function"><span class="keyword">int</span> <span class="title">size</span><span class="params">()</span></span>;	<span class="comment">// number of items in bag</span></span><br><span class="line">	<span class="function">Iterator&lt;Item&gt; <span class="title">iterator</span><span class="params">()</span></span>;	<span class="comment">// iterator for all items in bag</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="applications-1"><a href="#applications-1" class="headerlink" title="applications"></a>applications</h3><p>Why not simply use Java collections library?</p>
<p><strong>“Performance”</strong></p>
<p>Lesson: Don’t use a library until you understand its API or you can tolerate the defect of the efficiency.</p>
<p>Stack applications:</p>
<ul>
<li>Parsing in a compiler.</li>
<li>Java virtual machine.</li>
<li>Undo in a word processor.</li>
<li>Back button in a Web browser.</li>
<li>PostScript language for printers</li>
<li>Implementing function calls in a compiler.</li>
</ul>
<p>Dijkstra’s two-stack algorithm:</p>
<ul>
<li>Value: push onto the value stack.</li>
<li>Operator: push onto the operator stack.</li>
<li>Left parenthesis: ignore.</li>
<li>Right parenthesis: pop operator and two values; push the result of applying that operator to those values onto the operand stack.</li>
</ul>
<h3 id="Programming-Assignment-2"><a href="#Programming-Assignment-2" class="headerlink" title="Programming Assignment 2"></a>Programming Assignment 2</h3><p>Problem:</p>
<p><a href="http://coursera.cs.princeton.edu/algs4/assignments/queues.html" target="_blank" rel="noopener">Programming Assignment 2</a></p>
<p>Code is on my Github page:</p>
<p><a href="https://github.com/Aden-Q/Deques-and-Randomized-Queues" target="_blank" rel="noopener">Kdtree</a></p>
<p>Missing bonus memory challenge task. (I think it’s easy)</p>
<h2 id="Elementary-Sorts"><a href="#Elementary-Sorts" class="headerlink" title="Elementary Sorts"></a>Elementary Sorts</h2><h3 id="rules-of-the-game"><a href="#rules-of-the-game" class="headerlink" title="rules of the game"></a>rules of the game</h3><p>Goal: Sort any type of data.</p>
<p>Q. How can sort() know how to compare data of type Double, String, and java.io.File without any information about the type of an item’s key?</p>
<p>Callback = reference to executable code.</p>
<ul>
<li>Client passes array of objects to sort() function.</li>
<li>The sort() function calls back object’s compareTo() method as needed.</li>
</ul>
<p>Comparable interface (built in to Java)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Comparable</span>&lt;<span class="title">Item</span>&gt;</span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compareTo</span><span class="params">(Item that)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Object implementation:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">File</span> <span class="keyword">implements</span> <span class="title">Compareble</span>&lt;<span class="title">File</span>&gt;</span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">	...</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compareTo</span><span class="params">(File b)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">  	...</span><br><span class="line">  	<span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">  	...</span><br><span class="line">  	<span class="keyword">return</span> +<span class="number">1</span>;</span><br><span class="line">  	...</span><br><span class="line">  	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Sort implementation</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">sort</span><span class="params">(Comparable[] a)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">int</span> N = a.length;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++)</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">int</span> j = i; j &gt; <span class="number">0</span>; j--)</span><br><span class="line">          <span class="keyword">if</span> (a[j].compareTo(a[j-<span class="number">1</span>]) &lt; <span class="number">0</span>)</span><br><span class="line">              exch(a, j, j-<span class="number">1</span>);</span><br><span class="line">  		  <span class="keyword">else</span> <span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Total order</p>
<hr>
<p>A total order is a binary relation ≤ that satisfies</p>
<ul>
<li>Antisymmetry: if v ≤ w and w ≤ v, then v = w.</li>
<li>Transitivity: if v ≤ w and w ≤ x, then v ≤ x.</li>
<li>Totality: either v ≤ w or w ≤ v or both.</li>
</ul>
<p>Comparable API</p>
<hr>
<p>implement compareTo() so that v.compareTo(w)</p>
<ul>
<li>Is a total order.</li>
<li>Returns a negative integer, zero, or positive integer if v is less than, equal to, or greater than w, repectively.</li>
<li>Throws an exception if incompatible types (or either is null).</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Date</span> <span class="keyword">implements</span> <span class="title">Comparable</span>&lt;<span class="title">Date</span>&gt;</span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> month, day, year;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Date</span><span class="params">(<span class="keyword">int</span> m, <span class="keyword">int</span> d, <span class="keyword">int</span> y)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">  		month = m;</span><br><span class="line">  		day = dl</span><br><span class="line">  		year = yl</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compareTo</span><span class="params">(Date that)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">  		<span class="keyword">if</span> (<span class="keyword">this</span>.year &lt; that.year)	<span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">  		<span class="keyword">if</span> (<span class="keyword">this</span>.year &gt; that.year)	<span class="keyword">return</span> +<span class="number">1</span>;</span><br><span class="line">  		<span class="keyword">if</span> (<span class="keyword">this</span>.month &lt; that.month)	<span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">  		<span class="keyword">if</span> (<span class="keyword">this</span>.month &gt; that.month)	<span class="keyword">return</span> +<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.day &lt; that.day)	<span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.day &gt; that.day)	<span class="keyword">return</span> +<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Two useful sorting abstractions</p>
<hr>
<p>Less: Is item v less than w?</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">less</span><span class="params">(Comparable v, Comparable w)</span></span></span><br><span class="line"><span class="function"></span>&#123;	<span class="keyword">return</span> v.compareTo(w) &lt; <span class="number">0</span>; &#125;</span><br></pre></td></tr></table></figure>
<p>Exchange: Swap item in array a[] at index i with the one at index j.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">exch</span><span class="params">(Comparable[] a, <span class="keyword">int</span> i, <span class="keyword">int</span> j)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Comparable swap = a[i];</span><br><span class="line">    a[i] = a[j];</span><br><span class="line">    a[j] = swap;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="selection-sort"><a href="#selection-sort" class="headerlink" title="selection sort"></a>selection sort</h3><p>In iteration i, find index min of smallest remaining entry.</p>
<p>Swap a[i] and a[min].</p>
<center><br><img src="https://ws4.sinaimg.cn/large/006tKfTcly1g1b1eimnf3j30rv08bjux.jpg" style="zoom:60%"><br></center>

 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Selection</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">sort</span><span class="params">(Comparable[] a)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">    	<span class="keyword">int</span> N = a.length;</span><br><span class="line">    	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++)</span><br><span class="line">    	&#123;</span><br><span class="line">        	<span class="keyword">int</span> min = i;</span><br><span class="line">        	<span class="keyword">for</span> (<span class="keyword">int</span> j = i+<span class="number">1</span>; i &lt; N; j++)</span><br><span class="line">            	<span class="keyword">if</span> (less(a[j], a[min]))</span><br><span class="line">          			min = j;</span><br><span class="line">      		exch(a, i, min)</span><br><span class="line">    	&#125;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">less</span><span class="params">(Comparable v, Comparable w)</span></span></span><br><span class="line"><span class="function">  </span>&#123; <span class="comment">/* as before */</span> &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">exch</span><span class="params">(Comparable[] a, <span class="keyword">int</span> i, <span class="keyword">int</span> j)</span></span></span><br><span class="line"><span class="function">  </span>&#123; <span class="comment">/* as before */</span> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="insertion-sort"><a href="#insertion-sort" class="headerlink" title="insertion sort"></a>insertion sort</h3><p>In iteration i, swap a[i] with each larger entry to its left.</p>
<center><br><img src="https://ws2.sinaimg.cn/large/006tKfTcly1g1b1mumo6sj30sj084ad5.jpg" style="zoom:60%"><br></center>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Insertion</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">sort</span><span class="params">(Comparable[] a)</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">      <span class="keyword">int</span> N = a.length;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++)</span><br><span class="line">          <span class="keyword">for</span> (<span class="keyword">int</span> j = i; j &gt; <span class="number">0</span>; j--)</span><br><span class="line">              <span class="keyword">if</span> (less(a[j], a[j-<span class="number">1</span>]))</span><br><span class="line">          	  	  exch(a, j, j-<span class="number">1</span>);</span><br><span class="line">    		  <span class="keyword">else</span></span><br><span class="line">          		  <span class="keyword">break</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">less</span><span class="params">(Comparable v, Comparable w)</span></span></span><br><span class="line"><span class="function">  </span>&#123; <span class="comment">/* as before */</span> &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">exch</span><span class="params">(Comparable[] a, <span class="keyword">int</span> i, <span class="keyword">int</span> j)</span></span></span><br><span class="line"><span class="function">  </span>&#123; <span class="comment">/* as before */</span> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Def: An inversion is a pair of keys that are out of order.</p>
<p>Def: An array is partially sorted if the number of inversions is ≤ cN.</p>
<p>Proposition: For partially-sorted arrays, insertion sort runs in linear time.</p>
<p>Pf: Number of exchanges equals the number of inversions.</p>
<h3 id="shellsort"><a href="#shellsort" class="headerlink" title="shellsort"></a>shellsort</h3><p>Idea: Move entries more than one position at a time by h-sorting the array.</p>
<center><br><img src="https://ws1.sinaimg.cn/large/006tKfTcly1g1b1zwsg9uj30ma065abq.jpg" style="zoom:60%"><br></center>

<p>How to h-sort an array? Insertion sort, with stride length h.</p>
<center><br><img src="https://ws3.sinaimg.cn/large/006tKfTcly1g1b27tqt6mj30st0mj10f.jpg" style="zoom:60%"><br></center>

<p>Useful in practice:</p>
<ul>
<li>Fast unless array size is huge.</li>
<li>Tiny, fixed footprint for code (used in embedded systems).</li>
<li>Hardware sort prototype.</li>
</ul>
<h3 id="shuffling"><a href="#shuffling" class="headerlink" title="shuffling"></a>shuffling</h3><p>Shuffle sort</p>
<ul>
<li>Generate a random real number for each array entry.</li>
<li>Sort the array.</li>
</ul>
<p>Proposition: Shuffle sort produces a uniformly random permutation of the input array, provided no duplicate values.</p>
<p>Goal: Rearrange array so that result is a uniformly random permutation in linear time.</p>
<p>Knuth shuffle</p>
<ul>
<li>In iteration i, pick integer r between 0 and i uniformly at random.</li>
<li>Swap a[i] and a[r].</li>
</ul>
<p>Proposition: Knuth shuffling algorithm produces a uniformly random permutation of the input array in linear time.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StdRandom</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">  ...</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">shuffle</span><span class="params">(Object[] a)</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> N = a.length;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> r = StdRandom.uniform(i + <span class="number">1</span>);	<span class="comment">// between 0 and i</span></span><br><span class="line">        exch(a, i, r);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>online poker: easily cracked</p>
<p>Bottom line: Shuffling a deck of cards is hard!</p>
<h3 id="convex-hull"><a href="#convex-hull" class="headerlink" title="convex hull"></a>convex hull</h3><p>The convex hull of a set of N points is the smallest perimeter fence enclosing the points.</p>
<center><br><img src="https://ws4.sinaimg.cn/large/006tKfTcly1g1b2pp0x4hj30ag098js9.jpg" style="zoom:60%"><br></center>

<p>Equivalent definitions:</p>
<ul>
<li>Smallest convex set containing all the points.</li>
<li>Smallest area convex polygon enclosing the points.</li>
<li>Convex polygon enclosing the points, whose vertices are points in set.</li>
</ul>
<p>Convex hull output: Sequence of vertices in counterclockwise order.</p>
<p>Convex hull application: motion planning</p>
<p>Robot motion planning: Find shortest path in the plane from s to t that avoids a polygonal obstacle.</p>
<p>Fact: Shortest path is either straight line from s to t or it is one of two polygonal chains of convex hull.</p>
<center><br><img src="https://ws2.sinaimg.cn/large/006tKfTcly1g1b2v8xwxgj30jm09bgo7.jpg" style="zoom:60%"><br></center>

<p>Farthest pair problem: Given N points in the plane, find a pair of points with the largest Euclidean distance between them.</p>
<center><br><img src="https://ws4.sinaimg.cn/large/006tKfTcly1g1b2x5yyapj30au09tgmu.jpg" style="zoom:60%"><br></center>



<p>Graham scan:</p>
<ul>
<li>Choose point p with smallest y-coordinate.</li>
<li>Sort points by polar angle with p.</li>
<li>Consider points in order; discard unless it create a ccw turn.</li>
</ul>
<center><br><img src="https://ws3.sinaimg.cn/large/006tKfTcly1g1b33pust5j30j20fdaci.jpg" style="zoom:60%"><br></center>

<p>Implementation:</p>
<p>Define a total order, comparing by y-coordinate.</p>
<p>Define a total order for each point p. (polar angle)</p>
<p>Computational geometry to determine counterclockwise for triple.</p>
<p>Mergesort to sort efficiently.</p>
<p>Implementing ccw:</p>
<p>CCW: Given three points a, b, and c, is a-&gt;b-&gt;c a counterclockwise turn? (is c to the left of the ray a-&gt;b)</p>
<center><br><img src="https://ws3.sinaimg.cn/large/006tKfTcly1g1b3a2cjzjj30b708e751.jpg" style="zoom:60%"><br></center>


<p>A good strategy involves computing areas (high school compitation knowledge)</p>
<p>To show respectations:</p>
<center><br><img src="https://ws2.sinaimg.cn/large/006tKfTcly1g1b3eepjljj30qi06g42n.jpg" style="zoom:60%"><br></center>




<h1 id="Week-3"><a href="#Week-3" class="headerlink" title="Week 3"></a>Week 3</h1><h2 id="Mergesort"><a href="#Mergesort" class="headerlink" title="Mergesort"></a>Mergesort</h2><h3 id="mergesort"><a href="#mergesort" class="headerlink" title="mergesort"></a>mergesort</h3><p>Basic plan:</p>
<ul>
<li>Divide array into two halves.</li>
<li>Recursively sort each half.</li>
<li>Merge two halves.</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">merge</span><span class="params">(Comparable[] a, Comparable[] aux, <span class="keyword">int</span> lo, <span class="keyword">int</span> mid, <span class="keyword">int</span> hi)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">assert</span> <span class="title">isSorted</span><span class="params">(a, lo, mid)</span></span>;	<span class="comment">// precondition: a[lo...mid] sorted</span></span><br><span class="line">    <span class="function"><span class="keyword">assert</span> <span class="title">isSorted</span><span class="params">(a, mid+<span class="number">1</span>, hi)</span></span>;	<span class="comment">// precondition: a[mid+1...hi] sorted</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> k = lo; k &lt;= hi; k++)</span><br><span class="line">        aux[k] = a[k];</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">int</span> i = lo, j = mid+<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> k = lo; k &lt;= hi; k++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (i &gt; mid)	a[k] = aux[j++];</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (j &gt; hi)	a[k] = aux[i++];</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (less(aux[j], aux[i]))	a[k] = aux[j++];</span><br><span class="line">        <span class="keyword">else</span>	a[k] = aux[i++];</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">assert</span> <span class="title">isSorted</span><span class="params">(a, lo, hi)</span></span>;	<span class="comment">// poscondition: a[lo...hi] sorted</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Assertion: Statement to test assumptions about your program.</p>
<ul>
<li>Helps detect logic bugs.</li>
<li>Documents code.</li>
</ul>
<p>Java assert statement: Throws exception unless boolean condition is true.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">assert</span> <span class="title">isSorted</span><span class="params">(a, lo, hi)</span></span>;</span><br></pre></td></tr></table></figure>
<p>Can enable or disable at runtime:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">java -ea MyProgram	<span class="comment">// enable assertions</span></span><br><span class="line">java -da MyProgram	<span class="comment">// disable assertions (default)</span></span><br></pre></td></tr></table></figure>
<p>Best practices: Use assertions to check internal invariants; assume assertions will be disabled in production code.</p>
<center><br><img src="https://ws3.sinaimg.cn/large/006tKfTcly1g1c6cuj9zyj30s009f77o.jpg" style="zoom:60%"><br></center>

<p>Recurrence relation</p>
<p>Proposition: Mergesort uses extra space proportional to N.</p>
<p>Pf: The array aux[] needs to be of size N for the last merge.</p>
<p> Some detailed improvements can be done. </p>
<h3 id="bottom-up-mergesort"><a href="#bottom-up-mergesort" class="headerlink" title="bottom-up mergesort"></a>bottom-up mergesort</h3><p>Basic plan:</p>
<ul>
<li>Pass through array, merging subarrays of size 1.</li>
<li>Repeat for subarrays of size 2, 4, 8, 16, ……</li>
</ul>
<p>Bottom line: No recursion needed!</p>
<p>Several passes.</p>
<center><br><img src="https://ws2.sinaimg.cn/large/006tKfTcly1g1c6t3ncm3j30pu0ehgsz.jpg" style="zoom:60%"><br></center>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MergeBU</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Comparable[] aux;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">merge</span><span class="params">(Comparable[] a, <span class="keyword">int</span> lo, <span class="keyword">int</span> mid, <span class="keyword">int</span> hi)</span></span></span><br><span class="line"><span class="function">    </span>&#123; <span class="comment">/* as before */</span> &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">sort</span><span class="params">(Comparable[] a)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> N = a.length;</span><br><span class="line">        aux = <span class="keyword">new</span> Comparable[N];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> sz = <span class="number">1</span>; sz &lt; N; sz = sz+sz)</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> lo = <span class="number">0</span>; lo &lt; M - sz; lo += sz+sz)</span><br><span class="line">                merge(a, lo, lo+sz-<span class="number">1</span>, Math.min(lo+sz+sz-<span class="number">1</span>, N-<span class="number">1</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>log N passes</p>
<h3 id="sorting-complexity"><a href="#sorting-complexity" class="headerlink" title="sorting complexity"></a>sorting complexity</h3><p>Model of computation: Allowable operations.</p>
<p>Cost model: Operation count(s).</p>
<p>Upper bound: Cost guarantee provided by some algorithm for X.</p>
<p>Lower bound: Proven limit on cost guarantee of all algorithms for X.</p>
<p>Optimal algorithm: Algorithm with best possible cost guarantee for X.</p>
<p>Decision tree: please refer to CLRS</p>
<p>Mergesort is optimal with respect to compares.</p>
<p>Mergesort is not optimal with respect to space usage.</p>
<p>Lower bound N log N may not hold if the algorithm has information about:</p>
<ul>
<li>The initial order of the input.</li>
<li>The distribution of key values.</li>
<li>The representation of the keys.</li>
</ul>
<p>Eg:</p>
<p>Partially-ordered arrays.</p>
<p>Duplicate keys.</p>
<p>Digital properties of keys.</p>
<h3 id="comparators"><a href="#comparators" class="headerlink" title="comparators"></a>comparators</h3><p>Comparable interface: sort using a type’s natural order.</p>
<p>Comparator interface: sort using an alternate order.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Comparator</span>&lt;<span class="title">Key</span>&gt;</span></span><br><span class="line"><span class="class">	<span class="title">int</span> <span class="title">compare</span>(<span class="title">Key</span> <span class="title">v</span>, <span class="title">Key</span> <span class="title">w</span>)	// <span class="title">compare</span> <span class="title">keys</span> <span class="title">v</span> <span class="title">and</span> <span class="title">w</span></span></span><br></pre></td></tr></table></figure>
<p>Required property: Must be a total order.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Student</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> Comparator&lt;Student&gt; BY_NAME = <span class="keyword">new</span> ByName();</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> Comparator&lt;Student&gt; BY_SECTION = <span class="keyword">new</span> BySection();</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> section;</span><br><span class="line">    ...</span><br><span class="line">        </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">ByName</span> <span class="keyword">implements</span> <span class="title">Comparator</span>&lt;<span class="title">Student</span>&gt;</span></span><br><span class="line"><span class="class">    </span>&#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compare</span><span class="params">(Student v, Student w)</span></span></span><br><span class="line"><span class="function">        </span>&#123; <span class="keyword">return</span> v.name.compareTo(w.name); &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">BySection</span> <span class="keyword">implements</span> <span class="title">Comparator</span>&lt;<span class="title">Student</span>&gt;</span></span><br><span class="line"><span class="class">    </span>&#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compare</span><span class="params">(Student v, Student w)</span></span></span><br><span class="line"><span class="function">        </span>&#123; <span class="keyword">return</span> v.section - w.section; &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="stability"><a href="#stability" class="headerlink" title="stability"></a>stability</h3><p>Selection/Shell sort are not stable.</p>
<p>Insertion/Merge sort are stable.</p>
<p>Long-distance exchange may lead to problems.</p>
<p>Mergesort is stable because merge is stable.</p>
<h3 id="Programming-Assignment-3"><a href="#Programming-Assignment-3" class="headerlink" title="Programming Assignment 3"></a>Programming Assignment 3</h3><p>Problem:</p>
<p><a href="http://coursera.cs.princeton.edu/algs4/assignments/collinear.html" target="_blank" rel="noopener">Programming Assignment 3</a></p>
<p>Code is on my Github page:</p>
<p><a href="https://github.com/Aden-Q/Collinear" target="_blank" rel="noopener">Pattern Recognition</a></p>
<p>Failed some timing tests because HashMap is not allowed.</p>
<p>Got 92 out of 100.</p>
<h2 id="Quicksort"><a href="#Quicksort" class="headerlink" title="Quicksort"></a>Quicksort</h2><h3 id="quicksort"><a href="#quicksort" class="headerlink" title="quicksort"></a>quicksort</h3><p>Basic plan:</p>
<ul>
<li>Shuffle the array.</li>
<li>Partition.</li>
<li>Sort each piece recursively.</li>
</ul>
<p>Phase 1: Repeat until i and j pointers cross.</p>
<ul>
<li>Scan i from left to right so long as (a[i] &lt; a[lo])</li>
<li>Scan j from right to left so long as (a[j] &gt; a[lo])</li>
<li>Exchange a[i] with a[j]</li>
</ul>
<p>Phase 2: When pointers cross.</p>
<ul>
<li>Exchange a[lo] with a[j]</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">partition</span><span class="params">(Comparable[] a, <span class="keyword">int</span> lo, <span class="keyword">int</span> hi)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i = lo, j = hi+<span class="number">1</span>;</span><br><span class="line">	<span class="keyword">while</span> (<span class="keyword">true</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">while</span> (less(a[++i], a[lo]))</span><br><span class="line">            <span class="keyword">if</span> (i == hi) <span class="keyword">break</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">while</span> (less(a[lo], a[--j]))</span><br><span class="line">            <span class="keyword">if</span> (j == lo) <span class="keyword">break</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> (i &gt;= j) <span class="keyword">break</span>;</span><br><span class="line">        exch(a, i, j);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    exch(a, lo, j);</span><br><span class="line">    <span class="keyword">return</span> j;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Quick</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">partition</span><span class="params">(Comparable[] a, <span class="keyword">int</span> lo, <span class="keyword">int</span> hi)</span></span></span><br><span class="line"><span class="function">    </span>&#123; <span class="comment">/* as before */</span> &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">sort</span><span class="params">(Comparable[] a)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        StdRandom.shuffle(a);</span><br><span class="line">        sort(a, <span class="number">0</span>, a.length - <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">sort</span><span class="params">(Comparable[] a, <span class="keyword">int</span> lo, <span class="keyword">int</span> hi)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (hi &lt;= lo)	<span class="keyword">return</span>;</span><br><span class="line">        <span class="keyword">int</span> j = partition(a, lo, hi);</span><br><span class="line">        sort(a, lo, j-<span class="number">1</span>);</span><br><span class="line">        sort(a, j+<span class="number">1</span>, hi);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Details:</p>
<ul>
<li>Partitioning in-place: Can be done with extra memoy.</li>
<li>Terminating the loop: Testing whether the pointers cross is a bit trickier than it might seem.</li>
<li>Staying in bounds: The (j == lo) test is redundant because of the key, but (i == hi) test is not.</li>
<li><p>Preserving randomness: Shuffling is needed for performance guarantee.</p>
</li>
<li><p>Equal keys: When duplicates are present, it is bettuer to stop on keys equal to the partitioning item’s key.</p>
</li>
</ul>
<p>Best case: N log N</p>
<p>Worst case: $N^2$</p>
<center><br><img src="https://ws1.sinaimg.cn/large/006tKfTcly1g1d8shuq7hj30wn0ludp8.jpg" style="zoom:60%"><br></center>

<p>Approximate sum by an integral.</p>
<p>Proposition: Quicksort is an in-place sorting algorithm, not stable.</p>
<p>Pf:</p>
<ul>
<li>Partitioning: constant extra space.</li>
<li>Depth of recursion: logarithmic extra space (with high probability).</li>
</ul>
<p>Insertion sort small subarrays:</p>
<ul>
<li>Even quicksort has too much overhead for tiny subarrays.</li>
<li>Cutoff to insertion sort for around 10 items.</li>
<li>Note: could delay insertion sort until one pass at end.</li>
</ul>
<p>Practical improvements:</p>
<p>Insertion sort small subarrays:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">sort</span><span class="params">(Comparable[] a, <span class="keyword">int</span> lo, <span class="keyword">int</span> hi)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (hi &lt;= lo + CUTOFF - <span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        Insertion.sort(a, lo, hi);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> j = partition(a, lo, hi);</span><br><span class="line">    sort(a, lo, j-<span class="number">1</span>);</span><br><span class="line">    sort(a, j+<span class="number">1</span>, hi);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Median of sample:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">sort</span><span class="params">(Comparable[] a, <span class="keyword">int</span> lo, <span class="keyword">int</span> hi)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (hi &lt;= lo)	<span class="keyword">return</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">int</span> m = medianOf3(a, lo, lo + (hi -lo)/<span class="number">2</span>, hi);</span><br><span class="line">    swap(a, lo, m);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">int</span> j = partition(a, lo, hi);</span><br><span class="line">    sort(a, lo, j-<span class="number">1</span>);</span><br><span class="line">    sort(a, j+<span class="number">1</span>, hi);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="selection"><a href="#selection" class="headerlink" title="selection"></a>selection</h3><p>Goal: Given an array of N items, find the kth largest.</p>
<p>Applications:</p>
<ul>
<li>Order statistics.</li>
<li>Find the “top k.”</li>
</ul>
<p>Quick-select:</p>
<hr>
<p>Partition array so that:</p>
<ul>
<li>Entry a[j] is in place.</li>
<li>No larger entry to the left of j.</li>
<li>No smaller entry to the right of j.</li>
</ul>
<p>Repeat in one subarray, depending on j; finished when j equals k.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Comparable <span class="title">select</span><span class="params">(Comparable[] a, <span class="keyword">int</span> k)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    StdRandom.shuffle(a);</span><br><span class="line">    <span class="keyword">int</span> lo = <span class="number">0</span>; hi = a.length - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (hi &gt; lo)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> j = partition(a, lo, hi);</span><br><span class="line">        <span class="keyword">if</span> (j &lt; k) lo = j + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (j &gt; k)	hi = j - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">else</span>	<span class="keyword">return</span> a[k];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> a[k];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Proposition: Quick-select takes linear time on average.</p>
<p>Remard: Quadratic time in the worst case while random shuffle provides a probabilistic guarantee.</p>
<h3 id="duplicate-keys"><a href="#duplicate-keys" class="headerlink" title="duplicate keys"></a>duplicate keys</h3><p>Quicksort with duplicate keys: Algorithm goes quadratic unless partitioning stops on equal keys!</p>
<p>3-way partitioning:</p>
<p>Goal: Partition array into 3 parts so that:</p>
<ul>
<li>Entries between lt and gt equal to partition item v.</li>
<li>No larger entries to left of lt.</li>
<li>No smaller entries to right of gt.</li>
</ul>
<center><br><img src="https://ws3.sinaimg.cn/large/006tKfTcly1g1d9kvv8aqj30ee06lt9f.jpg" style="zoom:60%"><br></center>

<center><br><img src="https://ws2.sinaimg.cn/large/006tKfTcly1g1d9nf4f8qj30f505m3z1.jpg" style="zoom:60%"><br></center>

<p>Bottom line: Randomized quicksort with 3-way partitioning reduces running time from linearithmic to linear in broad class of applications.</p>
<h3 id="system-sorts"><a href="#system-sorts" class="headerlink" title="system sorts"></a>system sorts</h3><p>Java system sorts:</p>
<p>Arrays.sort()</p>
<ul>
<li>Has different method for each primitive type.</li>
<li>Has a method for data types that implement Comparable.</li>
<li>Has a method that uses a Comparator.</li>
<li>Uses tuned quicksort for primitive types; tuned mergesort for objects.</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StringSort</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        String[] a = StdIn.readStrings();</span><br><span class="line">        Arrays.sort(a);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++)</span><br><span class="line">            StdOut.println(a[i]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Choices:</p>
<center><br><img src="https://ws1.sinaimg.cn/large/006tKfTcly1g1da8hsgkuj30sc0h7jza.jpg" style="zoom:60%"><br></center>







<h1 id="Week-4"><a href="#Week-4" class="headerlink" title="Week 4"></a>Week 4</h1><h2 id="Priority-Queues"><a href="#Priority-Queues" class="headerlink" title="Priority Queues"></a>Priority Queues</h2><h3 id="API-and-elementary-implementations"><a href="#API-and-elementary-implementations" class="headerlink" title="API and elementary implementations"></a>API and elementary implementations</h3><p>Collections: Insert and delete items.</p>
<ul>
<li>Stack: Remove the item most recently added.</li>
<li>Queue: Remove the item least recently added.</li>
<li>Randomized queue: Remove a random item.</li>
<li>Priority queue: Remove the largest (or smallest) item.</li>
</ul>
<p>Priority queue API</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MaxPQ</span>&lt;<span class="title">Key</span> <span class="keyword">extends</span> <span class="title">Comparable</span>&lt;<span class="title">Key</span>&gt;&gt;</span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">	MaxPQ();	<span class="comment">// create an empty priority queue</span></span><br><span class="line">	MaxPQ(Key[] a);	<span class="comment">// create a priority with given keys</span></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">insert</span><span class="params">(Key v)</span></span>;	<span class="comment">// insert a key into the priority queue</span></span><br><span class="line">	<span class="function">Key <span class="title">delMax</span><span class="params">()</span></span>;	<span class="comment">// return and remove the largest key</span></span><br><span class="line">	<span class="function"><span class="keyword">boolean</span> <span class="title">isEmpty</span><span class="params">()</span></span>;	<span class="comment">// is the priority queue empty?</span></span><br><span class="line">	<span class="function">Key <span class="title">max</span><span class="params">()</span></span>;	<span class="comment">// return the largest key</span></span><br><span class="line">	<span class="function"><span class="keyword">int</span> <span class="title">size</span><span class="params">()</span></span>;	<span class="comment">// number of entries in the priority queue</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Applications:</p>
<ul>
<li>Event-driven simulation</li>
<li>Numerical computation</li>
<li>Data compression</li>
<li>Graph searching</li>
<li>Number theory</li>
<li>Artificial intelligence</li>
<li>Statistics</li>
<li>Operating systems</li>
<li>Discrete optimization</li>
<li>Spam filtering</li>
</ul>
<p>Generalizes: stack, queue, randomized queue.</p>
<p>Unordered array implementation:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UnorderedMaxPQ</span>&lt;<span class="title">Key</span> <span class="keyword">extends</span> <span class="title">Comparable</span>&lt;<span class="title">Key</span>&gt;&gt;</span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> Key[] pq;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> N;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">UnorderedMaxPQ</span><span class="params">(<span class="keyword">int</span> capacity)</span></span></span><br><span class="line"><span class="function">	</span>&#123; pq = (Key[]) <span class="keyword">new</span> Comparable[capacity]; &#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isEmpty</span><span class="params">()</span></span></span><br><span class="line"><span class="function">	</span>&#123; <span class="keyword">return</span> N == <span class="number">0</span>; &#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">insert</span><span class="params">(Key x)</span></span></span><br><span class="line"><span class="function">	</span>&#123; pq[N++] = x; &#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> Key <span class="title">delMax</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">    	<span class="keyword">int</span> max = <span class="number">0</span>;</span><br><span class="line">    	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; N; i++)</span><br><span class="line">    		<span class="keyword">if</span> (less(max, i)) max = i;</span><br><span class="line">    	exch(max, N-<span class="number">1</span>);</span><br><span class="line">    	<span class="keyword">return</span> pq[--N];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>implementation</th>
<th>insert</th>
<th>delmax</th>
<th>max</th>
</tr>
</thead>
<tbody>
<tr>
<td>unordered array</td>
<td>1</td>
<td>N</td>
<td>N</td>
</tr>
<tr>
<td>ordered array</td>
<td>N</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>Goal</td>
<td>log N</td>
<td>log N</td>
<td>log N</td>
</tr>
</tbody>
</table>
<h3 id="binary-heaps"><a href="#binary-heaps" class="headerlink" title="binary heaps"></a>binary heaps</h3><p>Based on complete binary tree (Perfectly balanced, except for bottom level).</p>
<p>Binary heap: Array representation of a heap-ordered complete binary tree.</p>
<p>Heap-ordered binary tree:</p>
<ul>
<li>Keys in nodes.</li>
<li><p>Parent’s key no smaller than children’s key.</p>
<p>Array representation:</p>
</li>
<li><p>Indices start at 1. (Start at 0 causes a little trouble)</p>
</li>
<li>Take nodes in level order.</li>
<li>No explicit liniks needed!</li>
</ul>
<p>Proposition: Largest key is a[1], which is root of binary tree.</p>
<p>Proposition: Can use array indices to move through tree.</p>
<ul>
<li>Parent of node at k is at k/2.</li>
<li>Children of node at k are at 2k and 2k+1.</li>
</ul>
<center><br><img src="https://ws3.sinaimg.cn/large/006tKfTcly1g1dnzpm3q4j30dw0dagom.jpg" style="zoom:60%"><br></center>



<p>Swim:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">swim</span><span class="params">(<span class="keyword">int</span> k)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">while</span> (k &gt; <span class="number">1</span> &amp;&amp; less(k/<span class="number">2</span>, k))</span><br><span class="line">    &#123;</span><br><span class="line">        exch(k, k/<span class="number">2</span>);</span><br><span class="line">        k = k/<span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Insertion:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">insert</span><span class="params">(Key x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    pq[++N] = x;</span><br><span class="line">    swim(N);	<span class="comment">// swim means swim up</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<center><br><img src="https://ws1.sinaimg.cn/large/006tKfTcly1g1do64ok5pj30cb0h90wm.jpg" style="zoom:60%"><br></center>

<p>Sink:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">sink</span><span class="params">(<span class="keyword">int</span> k)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">while</span> (<span class="number">2</span>*k &lt;= N)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> j = <span class="number">2</span>*k;</span><br><span class="line">        <span class="keyword">if</span> (j &lt; N &amp;&amp; less(j, j+<span class="number">1</span>)) j++;</span><br><span class="line">        <span class="keyword">if</span> (!less(k, j)) <span class="keyword">break</span>;</span><br><span class="line">        exch(k, j);</span><br><span class="line">        k = j;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Delete max:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> Key <span class="title">delMax</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Key max = pq[<span class="number">1</span>];</span><br><span class="line">    exch(<span class="number">1</span>, N--);</span><br><span class="line">    sink(<span class="number">1</span>);</span><br><span class="line">    pq[N+<span class="number">1</span>] = <span class="keyword">null</span>;	<span class="comment">// prevent loitering</span></span><br><span class="line">    <span class="keyword">return</span> max;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<center><br><img src="https://ws2.sinaimg.cn/large/006tKfTcly1g1dog1bzv3j30dv0hd0xg.jpg" style="zoom:60%"><br></center>



<p>Complete Java implementation:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MaxPQ</span>&lt;<span class="title">Key</span> <span class="keyword">extends</span> <span class="title">Comparable</span>&lt;<span class="title">Key</span>&gt;&gt;</span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> Key[] pq;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> N;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">MaxPQ</span><span class="params">(<span class="keyword">int</span> capacity)</span></span></span><br><span class="line"><span class="function">	</span>&#123; pq = (Key[]) <span class="keyword">new</span> Comparable[capacity+<span class="number">1</span>]; &#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isEmpty</span><span class="params">()</span></span></span><br><span class="line"><span class="function">	</span>&#123; <span class="keyword">return</span> N == <span class="number">0</span>; &#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">insert</span><span class="params">(Key key)</span></span></span><br><span class="line"><span class="function">	</span>&#123; <span class="comment">/* as before */</span> &#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">delMax</span><span class="params">()</span></span>;</span><br><span class="line">	&#123; <span class="comment">/* as before */</span> &#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">swim</span><span class="params">(<span class="keyword">int</span> k)</span></span>;</span><br><span class="line">	&#123; <span class="comment">/* as before */</span> &#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="title">sink</span><span class="params">(<span class="keyword">int</span> k)</span></span></span><br><span class="line"><span class="function">	</span>&#123; <span class="comment">/* as before */</span> &#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">less</span><span class="params">(<span class="keyword">int</span> i, <span class="keyword">int</span> j)</span></span></span><br><span class="line"><span class="function">	</span>&#123; <span class="keyword">return</span> pq[i].compareTo(pq[j]) &lt; <span class="number">0</span>; &#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">exch</span><span class="params">(<span class="keyword">int</span> i, <span class="keyword">int</span> j)</span></span></span><br><span class="line"><span class="function">	</span>&#123; Key t = pq[i]; pq[i] = pq[j]; pq[j] = t; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Improvements: Fibonacci heap</p>
<p>Some considerations</p>
<hr>
<p>Immutability of keys:</p>
<ul>
<li>Assumption: client does not change keys while they’re on the PQ.</li>
<li>Best practice: use immutable keys.</li>
</ul>
<p>Underflow and overflow:</p>
<ul>
<li>Underflow: throw exception if deleting from empty PQ.</li>
<li>Overflow: add no-arg constructor and use resizing array.</li>
</ul>
<p>Minimum-oriented priority queue:</p>
<ul>
<li>Replace less() with greater().</li>
<li>Implement greater().</li>
</ul>
<p>Other operations:</p>
<ul>
<li>Remove an arbitrary item.</li>
<li>Change the priority of an item.</li>
</ul>
<p>Immutability:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">Vector</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> N;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">double</span>[] data;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Vector</span><span class="params">(<span class="keyword">double</span>[] data)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.N = data.length;</span><br><span class="line">        <span class="keyword">this</span>.data = <span class="keyword">new</span> <span class="keyword">double</span>[N];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++)</span><br><span class="line">            <span class="keyword">this</span>.data[i] = data[i];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Immutable: String, Integer, Double, Color, Vector, Transaction, Point2D.</p>
<p>Mutable: StringBuilder, Stack, Counter, Java array.</p>
<p>Advantages of immutability:</p>
<ul>
<li>Simplifies debugging.</li>
<li>Safer in presence of hostile code.</li>
<li>Simplifiers concurrent programming.</li>
<li>Safe to use as key in priority queue or symbol table.</li>
</ul>
<p>Disadvantage: Must create new object for each data type value.</p>
<h3 id="heapsort"><a href="#heapsort" class="headerlink" title="heapsort"></a>heapsort</h3><p>Basic plan for in-place sort:</p>
<ul>
<li>Create max-heap with all N keys.</li>
<li>Repeatedly remove the maximum key.</li>
</ul>
<p>Heap construction: Sink, bottom-up.</p>
<p>Build:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> k = N/<span class="number">2</span>; k &gt;= <span class="number">1</span>; k--)</span><br><span class="line">    sink(a, k, N);</span><br></pre></td></tr></table></figure>
<p>Sort:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> (N &gt; <span class="number">1</span>)</span><br><span class="line">&#123;</span><br><span class="line">    exch(a, <span class="number">1</span>, N--);</span><br><span class="line">    sink(a, <span class="number">1</span>, N);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Bottom line: </p>
<ul>
<li>Inner loop longer than quicksort’s</li>
<li>Makes poor use of cache memory</li>
<li>Not stable</li>
</ul>
<h3 id="event-driven-simulation"><a href="#event-driven-simulation" class="headerlink" title="event-driven simulation"></a>event-driven simulation</h3><p>Molecular dynamics simulation of hard discs</p>
<hr>
<p>Goal. Simulate the motion of N moving particles that behave according to the laws of elastic collision.</p>
<p>Time-driven simulation: Judge collision with dt</p>
<p>Event-driven simulation: Maintain PQ of collision events, prioritized by time.</p>
<center><br><img src="https://ws3.sinaimg.cn/large/006tKfTcly1g1entk93myj30pa067tbf.jpg" style="zoom:60%"><br></center>

<p>Collision prediction: Given position, velocity, and radius of a particle, when will it collide next with a wall or another particle?</p>
<p>Collision resolution: If collision occurs, update colliding particle(s) according to laws of elastic collisions.</p>
<p>Difficult simulation, involving a lot of physics and math, or at least not easy.</p>
<h3 id="Programming-Assignment-4"><a href="#Programming-Assignment-4" class="headerlink" title="Programming Assignment 4"></a>Programming Assignment 4</h3><p>Problem:</p>
<p><a href="http://coursera.cs.princeton.edu/algs4/assignments/8puzzle.html" target="_blank" rel="noopener">Programming Assignment 4</a></p>
<p>Code is on my Github page:</p>
<p><a href="https://github.com/Aden-Q/8-Puzzle" target="_blank" rel="noopener">8 Puzzle</a></p>
<p>Failed some timing tests.</p>
<p>Got 96 out of 100.</p>
<h2 id="Symbol-Tables"><a href="#Symbol-Tables" class="headerlink" title="Symbol Tables"></a>Symbol Tables</h2><h3 id="API"><a href="#API" class="headerlink" title="API"></a>API</h3><p>Key-value pair abstraction:</p>
<ul>
<li>Insert a value with specified key.</li>
<li>Given a key, search for the corresponding value.</li>
</ul>
<p>Associative array abstraction: Associate one value with each key.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ST</span>&lt;<span class="title">Key</span>, <span class="title">Value</span>&gt; </span>&#123;</span><br><span class="line">    ST();	<span class="comment">// create a symbol table</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">put</span><span class="params">(Key key, Value val)</span></span>;	<span class="comment">// put key-value pair into the table (remove key from table if value is null)</span></span><br><span class="line">    <span class="function">Value <span class="title">get</span><span class="params">(Key key)</span></span>;	<span class="comment">// value paired with key (null if key is absent)</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">delete</span><span class="params">(Key key)</span></span>;	<span class="comment">// remove key (and its value) from table</span></span><br><span class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">contains</span><span class="params">(Key key)</span></span>;	<span class="comment">// is there a value paired with key?</span></span><br><span class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">isEmpty</span><span class="params">()</span></span>;	<span class="comment">// is the table empty?</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">size</span><span class="params">()</span></span>;		<span class="comment">// number of key-value pairs in the table</span></span><br><span class="line">    <span class="function">Iterable&lt;Key&gt; <span class="title">keys</span><span class="params">()</span></span>;	<span class="comment">// all the keys in the table</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Convetions:</p>
<ul>
<li>Value are not null.</li>
<li>Method get() returns null if key not present.</li>
<li>Method put() overwrites old value with new value.</li>
</ul>
<p>Contains:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">contains</span><span class="params">(Key key)</span></span></span><br><span class="line"><span class="function"></span>&#123; <span class="keyword">return</span> get(key) != <span class="keyword">null</span>; &#125;</span><br></pre></td></tr></table></figure>
<p>Lazy delete:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">delete</span><span class="params">(Key key)</span></span></span><br><span class="line"><span class="function"></span>&#123; put(key, <span class="keyword">null</span>); &#125;</span><br></pre></td></tr></table></figure>
<p>Keys and values</p>
<hr>
<p>Value type: Any generic type.</p>
<p>Key type: several natural assumptions:</p>
<ul>
<li>Assume keys are Comparable, use compareTo().</li>
<li>Assume keys are any generic type, use equals() to test equality.</li>
<li>Assume keys are any generic type, use equals() to test equality; use hashCode() to scramble key.</li>
</ul>
<p>Best practices: Use immutable types for symbol table keys.</p>
<p>Equality test:</p>
<hr>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">Data</span> <span class="keyword">implements</span> <span class="title">Comparable</span>&lt;<span class="title">Date</span>&gt;</span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> month;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> day;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> year;</span><br><span class="line">	...</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object y)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">    	<span class="keyword">if</span> (y == <span class="keyword">this</span>)	<span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    	</span><br><span class="line">    	<span class="keyword">if</span> (y == <span class="keyword">null</span>)	<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    	</span><br><span class="line">    	<span class="keyword">if</span> (y.getClass() != <span class="keyword">this</span>.getClass())</span><br><span class="line">    		<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    		</span><br><span class="line">    	Date that = (Date) y;</span><br><span class="line">    	<span class="keyword">if</span> (<span class="keyword">this</span>.day != that.day)	<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    	<span class="keyword">if</span> (<span class="keyword">this</span>.month != that.month)	<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    	<span class="keyword">if</span> (<span class="keyword">this</span>.year != that.year)	<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    	</span><br><span class="line">    	<span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="elementary-implementations"><a href="#elementary-implementations" class="headerlink" title="elementary implementations"></a>elementary implementations</h3><p>Sequential search in a linked list:</p>
<hr>
<p>Data structure: Maintain an (unordered) linked list of key-value pairs.</p>
<p>Search: Scan through all keys until find a match.</p>
<p>Insert: Scan through all keys until find a match; if no match add to front.</p>
<p>Binary search in an ordered array:</p>
<hr>
<p>Data structure: Maintain an ordered array of key-value pairs.</p>
<p>Rank helper function: How many keys &lt; k?</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> Value <span class="title">get</span><span class="params">(Key key)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (isEmpty())	<span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">int</span> i = rank(key);</span><br><span class="line">    <span class="keyword">if</span> (i &lt; N &amp;&amp; keys[i].compareTo(key) == <span class="number">0</span>)	<span class="keyword">return</span> vals[i];</span><br><span class="line">    <span class="keyword">else</span>	<span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">rank</span><span class="params">(Key key)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> lo = <span class="number">0</span>; hi = N-<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (lo &lt;= hi)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> mid = lo + (hi - lo) / <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">int</span> cmp = key.compareTo(keys[mid]);</span><br><span class="line">        <span class="keyword">if</span> (cmp &lt; <span class="number">0</span>) hi = mid - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (cmp &gt; <span class="number">0</span>) lo = mid + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">else</span>	<span class="keyword">return</span> mid;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> lo;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<center><br><img src="https://ws1.sinaimg.cn/large/006tKfTcly1g1fnwacsmmj30wu0cpgqz.jpg" style="zoom:60%"><br></center>



<h3 id="ordered-operations"><a href="#ordered-operations" class="headerlink" title="ordered operations"></a>ordered operations</h3><p>API:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ST</span>&lt;<span class="title">Key</span> <span class="keyword">extends</span> <span class="title">Comparable</span>&lt;<span class="title">Key</span>&gt;, <span class="title">Value</span>&gt;</span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">	ST();	<span class="comment">// create an ordered symbol table</span></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">put</span><span class="params">(Key key, Value val)</span></span>;	<span class="comment">// put key-value pair into the table (remove key from table if value is null)</span></span><br><span class="line">	<span class="function">Value <span class="title">get</span><span class="params">(Key key)</span></span>;	<span class="comment">// value paired with key (null if key is absent)</span></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">delete</span><span class="params">(Key key)</span></span>;	<span class="comment">// remove key (and its value) from table</span></span><br><span class="line">	<span class="function"><span class="keyword">boolean</span> <span class="title">contains</span><span class="params">(Key key)</span></span>;	<span class="comment">// is there a value paired with key?</span></span><br><span class="line">	<span class="function"><span class="keyword">boolean</span> <span class="title">isEmpty</span><span class="params">()</span></span>;	<span class="comment">// is the table empty?</span></span><br><span class="line">	<span class="function"><span class="keyword">int</span> <span class="title">size</span><span class="params">()</span></span>;	<span class="comment">// number of key-value pairs</span></span><br><span class="line">	<span class="function">Key <span class="title">min</span><span class="params">()</span></span>;	<span class="comment">// smallest key</span></span><br><span class="line">	<span class="function">Key <span class="title">max</span><span class="params">()</span></span>;	<span class="comment">// largest key</span></span><br><span class="line">	<span class="function">Key <span class="title">floor</span><span class="params">(Key key)</span></span>;	<span class="comment">// smallest key less than or equal to key</span></span><br><span class="line">	<span class="function">Key <span class="title">ceiling</span><span class="params">(Key key)</span></span>;	<span class="comment">// smallest key greater than or equal to key</span></span><br><span class="line">	<span class="function"><span class="keyword">int</span> <span class="title">rank</span><span class="params">(Key key)</span></span>;	<span class="comment">// number of keys less than key</span></span><br><span class="line">	<span class="function">Key <span class="title">select</span><span class="params">(<span class="keyword">int</span> k)</span></span>;	<span class="comment">// key of rank k</span></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">deleteMin</span><span class="params">()</span></span>;	<span class="comment">// delete smallest key</span></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">deleteMax</span><span class="params">()</span></span>;	<span class="comment">// delete largest key</span></span><br><span class="line">	<span class="function"><span class="keyword">int</span> <span class="title">size</span><span class="params">(Key lo, Key hi)</span></span>;	<span class="comment">// number of keys in [lo..hi]</span></span><br><span class="line">	<span class="function">Iterable&lt;Key&gt; <span class="title">keys</span><span class="params">(Key lo, Key hi)</span></span>;	<span class="comment">// keys in [lo..hi], in sorted order</span></span><br><span class="line">	<span class="function">Iterable&lt;Key&gt; <span class="title">keys</span><span class="params">()</span></span>;	<span class="comment">// all keys in the table, in sorted order</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Binary-Search-Trees"><a href="#Binary-Search-Trees" class="headerlink" title="Binary Search Trees"></a>Binary Search Trees</h2><h3 id="BSTs"><a href="#BSTs" class="headerlink" title="BSTs"></a>BSTs</h3><p>Definition: A BST is binary tree in symmetric order.</p>
<p>A binary tree is either:</p>
<ul>
<li>Empty</li>
<li>Two disjoint binary trees (left and right).</li>
</ul>
<p>Symmetric order: Each node has a key, and every node’s key is: </p>
<ul>
<li>Larger than all keys in its left subtree.</li>
<li>Smaller than all keys in its right subtree.</li>
</ul>
<p>Java definition: A BST is a reference to a root Node.</p>
<p>A Node is comprised of four fields:</p>
<ul>
<li>A Key and a Value.</li>
<li>A reference to the left and right subtree.</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">Node</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Key key;</span><br><span class="line">    <span class="keyword">private</span> Value val;</span><br><span class="line">    <span class="keyword">private</span> Node left, right;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Node</span><span class="params">(Key key, Value val)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.key = key;</span><br><span class="line">        <span class="keyword">this</span>.val = val;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<center><br><img src="https://ws3.sinaimg.cn/large/006tKfTcly1g1fzf22o39j30fl0a4wh7.jpg" style="zoom:60%"><br></center>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BST</span>&lt;<span class="title">Key</span> <span class="keyword">extends</span> <span class="title">Comparable</span>&lt;<span class="title">Key</span>&gt;, <span class="title">Value</span>&gt;</span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> Node root;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">Node</span></span></span><br><span class="line"><span class="class">	</span>&#123; <span class="comment">/* see previous slide */</span> &#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">put</span><span class="params">(Key key, Value val)</span></span></span><br><span class="line"><span class="function">	</span>&#123; <span class="comment">/* see later */</span> &#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> Value <span class="title">get</span><span class="params">(Key key)</span></span></span><br><span class="line"><span class="function">	</span>&#123; <span class="comment">/* see later */</span> &#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">delete</span><span class="params">(Key key)</span></span></span><br><span class="line"><span class="function">	</span>&#123; <span class="comment">/* see later */</span> &#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> Iterable&lt;Key&gt; <span class="title">iterator</span><span class="params">()</span></span></span><br><span class="line"><span class="function">	</span>&#123; <span class="comment">/* see later */</span> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Search: If less, go left; if greater, go right; if equal, search hit.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> Value <span class="title">get</span><span class="params">(Key key)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Node x = root;</span><br><span class="line">    <span class="keyword">while</span> (x != <span class="keyword">null</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> cmp = key.compareTo(x.key);</span><br><span class="line">        <span class="keyword">if</span> (cmp &lt; <span class="number">0</span>)	x = x.left;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (cmp &gt; <span class="number">0</span>)	x = x.right;</span><br><span class="line">        <span class="keyword">else</span>	<span class="keyword">return</span> x.val;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Insertion (concise but tricky recursive code):</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">put</span><span class="params">(Key key, Value val)</span></span></span><br><span class="line"><span class="function"></span>&#123; root = put(root, key, val); &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> Node <span class="title">put</span><span class="params">(Node x, Key key, Value val)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (x == <span class="keyword">null</span>)	<span class="keyword">return</span> <span class="keyword">new</span> Node(key, val);</span><br><span class="line">    <span class="keyword">int</span> cmp = key.compareTo(x.key);</span><br><span class="line">    <span class="keyword">if</span> (cmp &lt; <span class="number">0</span>)	x.left = put(x.left, key, val);</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (cmp &gt; <span class="number">0</span>)	x.right = put(x.right, key, val);</span><br><span class="line">    <span class="keyword">else</span>	x.val = val;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> x;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ordered-operations-1"><a href="#ordered-operations-1" class="headerlink" title="ordered operations"></a>ordered operations</h3><p>Minimum: Smallest key in table.</p>
<p>Maximum: Largest key in table.</p>
<center><br><img src="https://ws2.sinaimg.cn/large/006tKfTcly1g1g00rztt2j30iu0a8gnd.jpg" style="zoom:60%"><br></center>

<p>Rank: How many keys &lt; k?</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">rank</span><span class="params">(Key key)</span></span></span><br><span class="line"><span class="function"></span>&#123; <span class="keyword">return</span> rank(key, root); &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">rank</span><span class="params">(Key key, Node x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (x == <span class="keyword">null</span>)	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> cmp = key.compareTo(x.key);</span><br><span class="line">    <span class="keyword">if</span> (cmp &lt; <span class="number">0</span>)	<span class="keyword">return</span> rank(key,x.left);</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (cmp &gt; <span class="number">0</span>)	<span class="keyword">return</span> <span class="number">1</span> + size(x.left) + rank(key, x.right);</span><br><span class="line">    <span class="keyword">else</span>	<span class="keyword">return</span> size(x.left);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Inorder traversal:</p>
<ul>
<li>Traverse left subtree.</li>
<li>Enqueue key.</li>
<li>Traverse right subtree.</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> Iterable&lt;Key&gt; <span class="title">keys</span><span class="params">()</span></span>;</span><br><span class="line">&#123;</span><br><span class="line">    Queue&lt;Key&gt; q = <span class="keyword">new</span> Queue&lt;Key&gt;();</span><br><span class="line">    inorder(root, q);</span><br><span class="line">    <span class="keyword">return</span> q;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">inorder</span><span class="params">(Node x, Queue&lt;Key&gt; q)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (x == <span class="keyword">null</span>)	<span class="keyword">return</span>;</span><br><span class="line">    inorder(x.left, q);</span><br><span class="line">    q.enqueue(x.key);</span><br><span class="line">    inorder(x.right, q);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="deletion"><a href="#deletion" class="headerlink" title="deletion"></a>deletion</h3><p>Lazy deletion:</p>
<ul>
<li>Set its value to null.</li>
<li>Leave key in tree to guide searches (but don’t consider it equal in search).</li>
</ul>
<p>Delete the minimum key:</p>
<ul>
<li>Go left until finding a node with a null left link.</li>
<li>Replace that node by its right link.</li>
<li>Update subtree counts.</li>
</ul>
<p>Else, Hibbard deletion, please refer to CLRS BST chapter for more details</p>
<h1 id="Week-5"><a href="#Week-5" class="headerlink" title="Week 5"></a>Week 5</h1><h2 id="Balanced-Search-Trees"><a href="#Balanced-Search-Trees" class="headerlink" title="Balanced Search Trees"></a>Balanced Search Trees</h2><h3 id="2-3-search-trees"><a href="#2-3-search-trees" class="headerlink" title="2-3 search trees"></a>2-3 search trees</h3><p>Allow 1 or 2 keys per node</p>
<ul>
<li>2-node: one key, two children</li>
<li>3-node: two keys, three children</li>
</ul>
<p>Perfect balance: Every path from root to null link has same length</p>
<p>Symmetric order: Inorder traversal yields keys in ascending order</p>
<center><br><img src="https://ws3.sinaimg.cn/large/006tKfTcly1g0yd3afksej30ka0bsgov.jpg" style="zoom:60%"><br></center>

<p>Search</p>
<ul>
<li>Compare search key against keys in node</li>
<li>Find interval containing search key</li>
<li>Follow associated link (recursively)</li>
</ul>
<p>Insert into a 2-node at bottom</p>
<ul>
<li>Search for key, as usual</li>
<li>Replace 2-node with 3-node</li>
</ul>
<p>Splitting a 4-node is a local transformation: constant number of operations</p>
<center><br><img src="https://ws3.sinaimg.cn/large/006tKfTcly1g0yde48g5vj30nb0gdgs4.jpg" style="zoom:60%"><br></center>



<p>Invariants: Maintain symmetric order and perfect balance</p>
<p>Pf: Each transformation maintains symmetric order and perfect balance</p>
<p>Tree height: Always $lg N$</p>
<h3 id="red-black-BSTs"><a href="#red-black-BSTs" class="headerlink" title="red-black BSTs"></a>red-black BSTs</h3><p>Left-leaning RB tree</p>
<p>Idea:</p>
<ul>
<li>Represent 2-3 tree as a BST</li>
<li>Use “internal” left-leaning links as “glue” for 3-nodes</li>
</ul>
<center><br><img src="https://ws1.sinaimg.cn/large/006tKfTcly1g0ydp9v9ckj30sj06wmzw.jpg" style="zoom:60%"><br></center>

<p>A BST such that:</p>
<ul>
<li>No node has two red links connected to it</li>
<li>Every path from root to null link has the same number of black links</li>
<li>Red links lean left</li>
</ul>
<p>2-3 tree and RB BST are coresponding as following:</p>
<center><br><img src="https://ws2.sinaimg.cn/large/006tKfTcly1g0ydtk0xlaj30ge0h478m.jpg" style="zoom:60%"><br></center>

<p>Search for red-black BST is the same as the general BST</p>
<p>Representation:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">boolean</span> RED = <span class="keyword">true</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">boolean</span> BLACK = <span class="keyword">false</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">Node</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    Key key;</span><br><span class="line">    Value val;</span><br><span class="line">    Node left, right;</span><br><span class="line">    <span class="keyword">boolean</span> color;	<span class="comment">// color of parent link</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">isRed</span><span class="params">(Node x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (x == <span class="keyword">null</span>) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    <span class="keyword">return</span> x.color == RED;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<p>Left rotation: Orient a (temporarily) right-leaning red link to lean left</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> Node <span class="title">rotateLedt</span><span class="params">(Node h)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">assert</span> <span class="title">isRed</span><span class="params">(h.right)</span></span>;</span><br><span class="line">    Node x = h.right;</span><br><span class="line">    h.right = x.left;</span><br><span class="line">    x.left = h;</span><br><span class="line">    x.color = h.color;</span><br><span class="line">    h.color = RED;</span><br><span class="line">    <span class="keyword">return</span> x;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Invariants: Maintains symmetric order and perfect black balance</p>
<p>Right rotation is similar.</p>
<hr>
<p>Color flip: Recolor to split a (temporary) 4-node</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">flipColors</span><span class="params">(Node h)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">assert</span> !isRed(h);</span><br><span class="line">    <span class="function"><span class="keyword">assert</span> <span class="title">isRed</span><span class="params">(h.left)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">assert</span> <span class="title">isRed</span><span class="params">(h.right)</span></span>;</span><br><span class="line">    h.color = RED;</span><br><span class="line">    h.left.color = Black;</span><br><span class="line">    h.right.color = Black;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<p>Insertion in a LLRB tree</p>
<p>Basic strategy: Maintain 1-1 correspondence with 2-3 trees by applying elementary red-black BST operations</p>
<center><br><img src="https://ws2.sinaimg.cn/large/006tKfTcly1g0yebsxcraj30dz0esact.jpg" style="zoom:60%"><br></center>

<p>Warmup 1: Insert into a tree with exactly 1 node</p>
<center><br><img src="https://ws4.sinaimg.cn/large/006tKfTcly1g0yeeyme4uj30ln0av795.jpg" style="zoom:60%"><br></center>

<p>Warmup 2: Insert into a tree with exactly 2 nodes (3 cases)</p>
<center><br><img src="https://ws2.sinaimg.cn/large/006tKfTcly1g0yej8db99j30ue0i1qc8.jpg" style="zoom:60%"><br></center>

<p>Case 2: Insert into a 3-node at the bottom</p>
<ul>
<li>Do standard BST insert; color new link red</li>
<li>Rotate to balance the 4-node (if needed)</li>
<li>Flip colors to pass red link up one level</li>
<li>Rotate to make lean left (if needed)</li>
<li>Repeat case 1 or case 2 up the tree (if needed)</li>
</ul>
<center><br><img src="https://ws2.sinaimg.cn/large/006tKfTcly1g0yenl6vckj30vo0d8443.jpg" style="zoom:60%"><br></center>


<p>Java implementation</p>
<p>Reduce one case to another</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> Node <span class="title">put</span><span class="params">(Node h, Key key, Value val)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (h == <span class="keyword">null</span>) <span class="keyword">return</span> <span class="keyword">new</span> Node(key, val, RED);</span><br><span class="line">    <span class="keyword">int</span> cmp = key.compareTo(h.key);</span><br><span class="line">    <span class="keyword">if</span>		(cmp &lt; <span class="number">0</span>) h.left = put(h.left, key, val);</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>	(cmp &gt; <span class="number">0</span>) h.right = put(h.right, key, val);</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (cmp == <span class="number">0</span>) h.val = val;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (isRed(h.right) &amp;&amp; !isRed(h.left))		h = rotateLeft(h;</span><br><span class="line">    <span class="keyword">if</span> (isRed(h.left) &amp;&amp; isRed(h.left.left))	h = rotateRight(h);</span><br><span class="line">    <span class="keyword">if</span> (isRed(h.left) &amp;&amp; isRed(h.right))		flipColors(h);</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">return</span> h;                                                              </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="B-trees-Bayer-McCreight-1972"><a href="#B-trees-Bayer-McCreight-1972" class="headerlink" title="B-trees (Bayer-McCreight, 1972)"></a>B-trees (Bayer-McCreight, 1972)</h3><p>File system model:</p>
<ul>
<li>Page: Contiguous block of data</li>
<li>Probe: First access to a page</li>
<li>Property: Time required for a probe is much larger than time to access data within a page</li>
<li>Cost model: Number of probes</li>
<li>Goal: Access data using minimum number of probes</li>
</ul>
<p>B-tree: Generalize 2-3 trees by allowing up to M-1 key-link pairs per node</p>
<ul>
<li>At least 2 key-link pairs at root</li>
<li>At least M/2 key-link pairs in other nodes</li>
<li>External nodes contain client keys</li>
<li>Internal nodes contain copies of keys to guide search</li>
</ul>
<p>Searching in a B-tree:</p>
<ul>
<li>Start at root</li>
<li>Find interval for search key and take corresponding link</li>
<li>Search terminates in external node</li>
</ul>
<p>Insertion in a B-tree:</p>
<ul>
<li>Search for new key</li>
<li>Insert at bottom</li>
<li>Split nodes with M key-link pairs on the way up the tree</li>
</ul>
<p>Red-black trees are widely used as system symbol tables</p>
<ul>
<li>Java: java.util.TreeMap, java.util.TreeSet</li>
<li>C++ STL: map, multimap, multiset</li>
<li>Linux kernel: completely fair scheduler, linux/rbtree.h</li>
<li>Emacs: conservative stack scanning</li>
</ul>
<p>B-tree variants: B+ tree, B* tree, B# tree, …</p>
<p>B-trees (and variants) are videly used for file systems and databases</p>
<ul>
<li>Windows: NTFS</li>
<li>Mac: HFS, HFS+</li>
<li>Linux: ReiserFS, XFS, Ext3FS, JFS</li>
<li>Databases: Oracle, DB2, Ingres, SQL, PostgreSQL</li>
</ul>
<h2 id="Geometric-Applications-of-BSTs"><a href="#Geometric-Applications-of-BSTs" class="headerlink" title="Geometric Applications of BSTs"></a>Geometric Applications of BSTs</h2><p>Applications: CAD, games, movies, virtual reality, databases, …</p>
<h3 id="1d-range-search"><a href="#1d-range-search" class="headerlink" title="1d range search"></a>1d range search</h3><ul>
<li>Insert key-value pair</li>
<li>Search for key k</li>
<li>Delete key k</li>
<li>Range search: find all keys between $k_1$ and $k_2$</li>
<li>Range count: number of keys between $k_1$ and $k_2$</li>
</ul>
<hr>
<p>Implementations:</p>
<table>
<thead>
<tr>
<th>data structure</th>
<th>insert</th>
<th>range count</th>
<th>range search</th>
</tr>
</thead>
<tbody>
<tr>
<td>unordered array</td>
<td>1</td>
<td>N</td>
<td>N</td>
</tr>
<tr>
<td>ordered array</td>
<td>N</td>
<td>log N</td>
<td>R + log N</td>
</tr>
<tr>
<td>goal</td>
<td>log N</td>
<td>log N</td>
<td>R + log N</td>
</tr>
</tbody>
</table>
<p>N = number of keys</p>
<p>R = number of keys that match</p>
<p>BST implementation:</p>
<p>Proposition: Running time proportional to log N.</p>
<p>Pf: Nodes examined = search path to lo + search path to hi.</p>
<h3 id="line-segment-intersection"><a href="#line-segment-intersection" class="headerlink" title="line segment intersection"></a>line segment intersection</h3><p>Orthogonal line segment intersection search</p>
<p>Quadratic algorithm: Check all pairs of line segments for intersection.</p>
<p>Nondegeneracy assumption: All x- and y- coordinates are distinct.</p>
<p>Sweep-line algorithm:</p>
<p>Sweep vertical line from left to right</p>
<ul>
<li>X-coordinates define events.</li>
<li>H-segment (left endpoint): insert y-coordinate into BST.</li>
<li>H-segment (right endpoint): remove y-coordinate from BST.</li>
<li>When hit a vertical line segment, do a 1-d search</li>
</ul>
<p>Proposition: The sweep-line algorithm takes time proportional to N log N + R to find all R intersections among N orthogonal line segments.</p>
<p>Pf.</p>
<ul>
<li>Put x-coordinates on a PQ (or sort).    N log N</li>
<li>Insert y-coordinates into BST  N log N</li>
<li>Delete y-coordinates from BST  N log N</li>
<li>Range searches in BST  N log N + R</li>
</ul>
<p>Bottom line: Sweep line reduces 2d orthogonal line segment intersection search to 1d range search</p>
<h3 id="kd-trees"><a href="#kd-trees" class="headerlink" title="kd trees"></a>kd trees</h3><p>Extension of ordered symbol-table to 2d keys</p>
<ul>
<li>Insert a 2d key</li>
<li>Delete a 2d key</li>
<li>Search for a 2d key</li>
<li>Range search: find all keys that lie in a 2d range</li>
<li>Range count: number of keys that lie in a 2d range</li>
</ul>
<p>Geometric interpretation:</p>
<ul>
<li>Keys are point in the plane</li>
<li>Find/count points in a given h-v rectangle</li>
</ul>
<hr>
<p>Grid implementation:</p>
<ul>
<li>Divide space into M-by-M grid of squares</li>
<li>Create list of points contained in each square</li>
<li>Use 2d array to directly index relevant square</li>
<li>Insert: add(x, y) to list for corresponding square</li>
<li>Range search: examine only squares that intersect 2d range query</li>
</ul>
<p>Space-time tradeoff</p>
<ul>
<li>Space: $M^2+N$</li>
<li>Time: 1 + $N/M^2$ per square examined, on average</li>
</ul>
<p>Choose grid square size to tune performance</p>
<ul>
<li>Too small: waste space</li>
<li>Too large: too many points per square</li>
</ul>
<p>It’s fast, simple solution for evenly-distributed points</p>
<p>Problem: Clustering a well-knwon phenomenon in geometric data</p>
<ul>
<li>Lists are too long, even though average length is short</li>
<li>Need data structure that adapts gracefully to data</li>
</ul>
<hr>
<p>2d tree construction</p>
<p>Recursively partition plane into two halfplanes.</p>
<center><br><img src="https://ws4.sinaimg.cn/large/006tKfTcly1g13eil2g5ij30fc0itdib.jpg" style="zoom:60%"><br></center>

<p>Data structure: BST, but alternate using x- and y- coordinates as key.</p>
<ul>
<li>Search gives rectangle containing point</li>
<li>Insert further subdivides the plane</li>
</ul>
<p>Range search in a 2d tree</p>
<p>Goal: Find all points in a query axis-aligned rectangle.</p>
<ul>
<li>Check if point in node lies in given rectangle</li>
<li>Recursively search left/bottom (if any could fall in rectangle)</li>
<li>Recursively search right/top (if any could fall in rectangle)</li>
</ul>
<center><br><img src="https://ws1.sinaimg.cn/large/006tKfTcly1g13et5rhmvj30xj0em0x2.jpg" style="zoom:60%"><br></center>



<p>Nearest neighbor search in a 2d tree</p>
<p>Goal: Find closest point to query point</p>
<center><br><img src="https://ws1.sinaimg.cn/large/006tKfTcly1g13es1t253j30xm0ey0wn.jpg" style="zoom:60%"><br></center>

<ul>
<li>Check distance from point in node to query point</li>
<li>Recursively search left/bottom (if it could contain a closer point)</li>
<li>Recursively search right/top (if it could contain a closer point)</li>
<li>Organize method so that it begins by searching for query point</li>
</ul>
<hr>
<p>Kd tree</p>
<p>Recursively partition k-dimensional space into 2 halfspaces</p>
<p>Efficient, simple data structure for processing k-dimensional data</p>
<ul>
<li>Widely used</li>
<li>Apapts well to high-dimensional and clustered data</li>
<li>Discovered by an undergrad in an algorithms class!</li>
</ul>
<hr>
<p>N-body simulation</p>
<ul>
<li>Build 3d-tree with N particles sa nodes</li>
<li>Store center-of-mass of subtree in each node.</li>
<li>To compute total force acting on a particle, traverse tree, but stop as soon as distance from particle to subdivision is sufficiently large.</li>
</ul>
<h3 id="interval-search-trees"><a href="#interval-search-trees" class="headerlink" title="interval search trees"></a>interval search trees</h3><p>1d interval search: Data structure to hold set of (overlapping) intervals</p>
<ul>
<li>Insert an interval (lo, hi).</li>
<li>Search for an interval (lo, hi).</li>
<li>Delete an interval (lo, hi).</li>
<li>Interval intersection query: given an interval (lo, hi), find all intervals (or one interval) in data structure that intersects (lo, hi).</li>
</ul>
<p>API</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">IntervalST</span></span></span><br><span class="line"><span class="class">    <span class="title">IntervalST</span>()</span></span><br><span class="line"><span class="class">    <span class="title">void</span> <span class="title">put</span>(<span class="title">Key</span> <span class="title">lo</span>, <span class="title">Key</span> <span class="title">hi</span>, <span class="title">Value</span> <span class="title">val</span>)</span></span><br><span class="line"><span class="class">    <span class="title">Value</span> <span class="title">get</span>(<span class="title">Key</span> <span class="title">lo</span>, <span class="title">Key</span> <span class="title">hi</span>)</span></span><br><span class="line"><span class="class">    <span class="title">void</span> <span class="title">delete</span>(<span class="title">Key</span> <span class="title">lo</span>, <span class="title">Key</span> <span class="title">hi</span>)</span></span><br><span class="line"><span class="class">    <span class="title">Iterable</span>&lt;<span class="title">Value</span>&gt; <span class="title">intersects</span>(<span class="title">Key</span> <span class="title">lo</span>, <span class="title">Key</span> <span class="title">hi</span>)</span></span><br></pre></td></tr></table></figure>
<p>Interval search trees</p>
<p>Create BST, where each node stores an interval (lo, hi).</p>
<ul>
<li>Use left endpoint as BST key.</li>
<li>Store max endpoint in subtree rooted at node.</li>
</ul>
<center><br><img src="https://ws3.sinaimg.cn/large/006tKfTcly1g13friuhaaj30o90duq6b.jpg" style="zoom:60%"><br></center>

<p>To insert an interval (lo, hi):</p>
<ul>
<li>Insert into BST, using lo as the key.</li>
<li>Update max in each node on search path.</li>
</ul>
<p>To search for any one interval that intersects query interval (lo, hi):</p>
<ul>
<li>If interval in node intersects query interval, return it.</li>
<li>Else if left subtree is null, go right.</li>
<li>Else if max endpoint in left subtree is less than lo, go right.</li>
<li>Else go left.</li>
</ul>
<p>Case 1. If search goes right, then no intersection in left.</p>
<p>Case 2. If search goes left, then there is either an intersection in left subtree or no intersections in either</p>
<p>Pf. Suppose no intersection in left.</p>
<ul>
<li>Since went left, we have lo ≤ max.</li>
<li>Then for any interval (a,b) in right subtree of x, hi &lt; c ≤ a, no intersection in right.</li>
</ul>
<h3 id="rectangle-intersection"><a href="#rectangle-intersection" class="headerlink" title="rectangle intersection"></a>rectangle intersection</h3><p>Orthogonal rectangle intersection search</p>
<p>Goal: Find all intersections among a set of N orthogonal rectangles</p>
<p>Quadratic algorithm: Check all pairs of rectangles for intersection</p>
<p>Non-degeneracy assumption: All x- and y- coordinates are distinct.</p>
<p>Design-rule checking:</p>
<ul>
<li>Certain wires cannot intersect</li>
<li>Certain spacing needed between different types of wires</li>
<li>Debugging = orthogonal rectangle intersection search</li>
</ul>
<p>Sweep-line algorithm (similar to previous one)</p>
<ul>
<li>X-coordinates of left and right endpoints define events.</li>
<li>Maintain set of rectangles that intersect the sweep line in an interval search tree (using y-intervals of rectangle).</li>
<li>Left endpoint: interval search for y-interval of rectangle; insert y-interval.</li>
<li>Right endpoint: remove y-interval.</li>
</ul>
<center><br><img src="https://ws4.sinaimg.cn/large/006tKfTcly1g13gi5ehrlj30vf0dojtf.jpg" style="zoom:60%"><br></center>

<p>Bottom line: Sweep line reduces 2d orthogonal rectangle intersection search to 1d interval search.</p>
<h3 id="Summary-Of-Geometric-Applications-of-BSTs"><a href="#Summary-Of-Geometric-Applications-of-BSTs" class="headerlink" title="Summary Of Geometric Applications of BSTs"></a>Summary Of Geometric Applications of BSTs</h3><center><br><img src="https://ws3.sinaimg.cn/large/006tKfTcly1g13glc65gbj30we0pewlm.jpg" style="zoom:60%"><br></center>


<h3 id="Programming-Assignment-5"><a href="#Programming-Assignment-5" class="headerlink" title="Programming Assignment 5"></a>Programming Assignment 5</h3><p>Problem:</p>
<p><a href="http://coursera.cs.princeton.edu/algs4/assignments/kdtree.html" target="_blank" rel="noopener">Programming Assignment 5</a></p>
<p>Code is on my Github page:</p>
<p><a href="https://github.com/Aden-Q/kd-tree" target="_blank" rel="noopener">Kdtree</a></p>
<p>Missing the optional task of running time analysis because it’s optional.</p>
<h1 id="Week-6"><a href="#Week-6" class="headerlink" title="Week 6"></a>Week 6</h1><h2 id="Hash-Tables"><a href="#Hash-Tables" class="headerlink" title="Hash Tables"></a>Hash Tables</h2><h3 id="hash-functions"><a href="#hash-functions" class="headerlink" title="hash functions"></a>hash functions</h3><p>Basic plan: save items in a key-indexed table (index is a function of the key).</p>
<p>Hash function: Method for computing array index from key.</p>
<p><code>hash(&quot;it&quot;) = 3</code></p>
<p>Issues:</p>
<ul>
<li>Computing the hash function.</li>
<li>Equality test.</li>
<li>Collision resolution.</li>
</ul>
<p>Classic space-time tradeoff.</p>
<ul>
<li>No space limitation: trivial hash function with key as index.</li>
<li>No time limitation: trivial collision resolution with sequential search.</li>
<li>Space and time limitations: hashing (the real world).</li>
</ul>
<p>Hash function</p>
<hr>
<p>Idealistic goal: Scramble the keys uniformly to produce a table index.</p>
<ul>
<li>Efficiently computable.</li>
<li>Each table index equally likely for each key.</li>
</ul>
<p>All Java classes inherit a method hashCode(), which returns a 32-bit int.</p>
<p>Default implementation: Memory address of x.</p>
<p>Some typicals in Java libraries:</p>
<center><br><img src="https://ws1.sinaimg.cn/large/006tKfTcly1g1g164xduhj30zg0mb11h.jpg" style="zoom:60%"><br></center>

<p> Hash for strings: Horner’s method</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">String</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> hash = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">char</span>[] s;</span><br><span class="line">	...</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">hashCode</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">    	<span class="keyword">int</span> h = hash;</span><br><span class="line">    	<span class="keyword">if</span> (h != <span class="number">0</span>)	<span class="keyword">return</span> h;</span><br><span class="line">    	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; length(); i++)</span><br><span class="line">    		h = s[i] + (<span class="number">31</span> * h);</span><br><span class="line">    	hash = h;</span><br><span class="line">    	<span class="keyword">return</span> h;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Modular hashing</p>
<p>Hash code: A int between $-2^{32}$ and $2^{31}-1$</p>
<p>Hash function: An int between 0 and M-1 (for use as array index).</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// to be between 0 and M-1</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">hash</span><span class="params">(Key key)</span></span></span><br><span class="line"><span class="function"></span>&#123; <span class="keyword">return</span> (key.hashCode() &amp; <span class="number">0x7fffffff</span>) % M; &#125;</span><br></pre></td></tr></table></figure>
<p>Assumption</p>
<p>Uniform hashing assumption: Each key is equally likely to hash to an integer between 0 and M-1.</p>
<h3 id="seperate-chaining"><a href="#seperate-chaining" class="headerlink" title="seperate chaining"></a>seperate chaining</h3><center><br><img src="https://ws4.sinaimg.cn/large/006tKfTcly1g1g1ngvns8j30kx0f4whb.jpg" style="zoom:60%"><br></center>

<p>Typical choice of M: near N / 5</p>
<h3 id="linear-probing"><a href="#linear-probing" class="headerlink" title="linear probing"></a>linear probing</h3><p>Open addressing (IBM 1953): When a new key collides, find next empty slot, and put it there.</p>
<center><br><img src="https://ws2.sinaimg.cn/large/006tKfTcly1g1g1v6g6iaj30dr0gbgnk.jpg" style="zoom:60%"><br></center>

<p>Hash: Map key to integer i between 0 and M-1.</p>
<p>Insert: Put at table index i if free; if not try i+1, i+2, etc.</p>
<p>Search: Search table index i; if occupied but no match, try i+1, i+2, etc.</p>
<p>Note: Array size M must be greater than number of key-value pairs N.</p>
<h3 id="context"><a href="#context" class="headerlink" title="context"></a>context</h3><p>Algorithmic complexity attack.</p>
<p>One-way hash function: “Hard” to find a key that will hash to a desired value.</p>
<p>Separate chaining vs. linear probing</p>
<hr>
<p>Separate chaining:</p>
<ul>
<li>Easier to implement delete.</li>
<li>Performance degrades gracefully.</li>
<li>Clustering less sensitive to poorly-designed hash function.</li>
</ul>
<p>Linear probing:</p>
<ul>
<li>Less wasted space.</li>
<li>Better cache performance.</li>
</ul>
<p>Variations:</p>
<ul>
<li>Two-probe hashing</li>
<li>Double hashing</li>
<li>Cuckoo hashing</li>
<li>And so on…</li>
</ul>
<h2 id="Symbol-Table-Applications"><a href="#Symbol-Table-Applications" class="headerlink" title="Symbol Table Applications"></a>Symbol Table Applications</h2><h3 id="sets"><a href="#sets" class="headerlink" title="sets"></a>sets</h3><p>Mathematical set: A collection of distinct keys.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SET</span>&lt;<span class="title">Key</span> <span class="keyword">extends</span> <span class="title">Comparable</span>&lt;<span class="title">Key</span>&gt;&gt;</span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">	SET();	<span class="comment">// create an empty set</span></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(Key key)</span></span>;	<span class="comment">// add the key to the set</span></span><br><span class="line">	<span class="function"><span class="keyword">boolean</span> <span class="title">contains</span><span class="params">(Key key)</span></span>;	<span class="comment">// is the key in the set?</span></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">remove</span><span class="params">(Key key)</span></span>;	<span class="comment">// remove the key from the set</span></span><br><span class="line">	<span class="function"><span class="keyword">int</span> <span class="title">size</span><span class="params">()</span></span>;	<span class="comment">// return the number of keys in the set</span></span><br><span class="line">	<span class="function">Iterator&lt;Key&gt; <span class="title">iterator</span><span class="params">()</span></span>;	<span class="comment">// iterator through keys in the set</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Exception filter:</p>
<ul>
<li>Read in a list of words from one file.</li>
<li>Print out all words from standard input that are { in, not in } the list.</li>
</ul>
<h3 id="dictionary-clients"><a href="#dictionary-clients" class="headerlink" title="dictionary clients"></a>dictionary clients</h3><p>Dictionary lookup.</p>
<h3 id="indexing-clients"><a href="#indexing-clients" class="headerlink" title="indexing clients"></a>indexing clients</h3><p>File indexing</p>
<hr>
<p>Goal: Given a list of files specified, create an index so that you can efficiently find all files containing a given query string.</p>
<p>Key: String.</p>
<p>Value: Set of files.</p>
<p>Concordance</p>
<hr>
<p>Goal: Preprocess a text corpus to support concordance queries: given a word, find all occurrences with their immediate contexts.</p>
<h3 id="sparse-vectors"><a href="#sparse-vectors" class="headerlink" title="sparse vectors"></a>sparse vectors</h3><center><br><img src="https://ws1.sinaimg.cn/large/006tKfTcly1g1g3ffe3xzj30hw086jta.jpg" style="zoom:60%"><br></center>

<p>Problem: Sparse matrix-vector multiplication.</p>
<p>Vector representations</p>
<hr>
<p>1 D array representation:</p>
<ul>
<li>Constant time access to elements.</li>
<li>Space proportional to N.</li>
</ul>
<center><br><img src="https://ws3.sinaimg.cn/large/006tKfTcly1g1g3gd9fznj30u103qwfy.jpg" style="zoom:60%"><br></center>





<p>Symbol table representation:</p>
<ul>
<li>Key = index, value = entry.</li>
<li>Efficient iterator.</li>
<li>Space proportional to number of nonzeros.</li>
</ul>
<center><br><img src="https://ws2.sinaimg.cn/large/006tKfTcly1g1g3ge1nh0j30fp05nwf9.jpg" style="zoom:60%"><br></center>



<p>Sparse matrix representation: Each row of matrix is a sparse vector.</p>
<ul>
<li>Efficient access to elements.</li>
<li>Space proportional to number of nonzeros (plus N).</li>
</ul>
<center><br><img src="https://ws4.sinaimg.cn/large/006tKfTcly1g1g3m3lj45j30ek0c2ad6.jpg" style="zoom:60%"><br></center>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">SparseVector[] a = <span class="keyword">new</span> SparseVector[N];</span><br><span class="line"><span class="keyword">double</span>[] x = <span class="keyword">new</span> <span class="keyword">double</span>[N];</span><br><span class="line"><span class="keyword">double</span>[] b = <span class="keyword">new</span> <span class="keyword">double</span>[N];</span><br><span class="line">...</span><br><span class="line"><span class="comment">// Initialize a[] and x[]</span></span><br><span class="line">...</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++)</span><br><span class="line">    b[i] = a[i].dot(x);</span><br></pre></td></tr></table></figure>

      
    </div>

    

    
    
    

    <div>
    
    <div>

    <div style="text-align:center;color: #ccc;font-size:14px;">-------------End of the article <i class="fa fa-paw"></i> Thanks for reading!-------------</div>

</div>
    
    </div>

    

    
       
    
    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Programming/" rel="tag"><i class="fa fa-tag"></i> Programming</a>
          
            <a href="/tags/Java/" rel="tag"><i class="fa fa-tag"></i> Java</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/03/08/改善深层神经网络编程作业/" rel="next" title="Improve Neural Network, Programming Assignments">
                <i class="fa fa-chevron-left"></i> Improve Neural Network, Programming Assignments
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2019/03/23/MathJax Formula/" rel="prev" title="MathJax Formula">
                MathJax Formula <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>


  </div>


          </div>
          

  
    <div id="gitalk-container"></div>  
  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Qingliu</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">18</span>
                    <span class="site-state-item-name">posts</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  <a href="/categories/index.html">
                    
                    
                      
                    
                    <span class="site-state-item-count">1</span>
                    <span class="site-state-item-name">categories</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  <a href="/tags/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">9</span>
                    <span class="site-state-item-name">tags</span>
                  </a>
                </div>
              
            </nav>
          

          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://github.com/Aden-Q" title="GitHub &rarr; https://github.com/Aden-Q" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="mailto:qian0102@umn.edu" title="E-Mail &rarr; mailto:qian0102@umn.edu" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://www.linkedin.com/in/azure-qian-11b128179" title="Linkedin &rarr; https://www.linkedin.com/in/azure-qian-11b128179" rel="noopener" target="_blank"><i class="fa fa-fw fa-linkedin"></i>Linkedin</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://www.facebook.com/zecheng.qian.7" title="FB Page &rarr; https://www.facebook.com/zecheng.qian.7" rel="noopener" target="_blank"><i class="fa fa-fw fa-facebook"></i>FB Page</a>
                </span>
              
            </div>
          

          

          
          

          
            
          
          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Week-1"><span class="nav-number">1.</span> <span class="nav-text">Week 1</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Why-study-algorithms"><span class="nav-number">1.1.</span> <span class="nav-text">Why study algorithms</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Union-Find"><span class="nav-number">1.2.</span> <span class="nav-text">Union-Find</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#dynamic-connectivity"><span class="nav-number">1.2.1.</span> <span class="nav-text">dynamic connectivity</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#quick-find"><span class="nav-number">1.2.2.</span> <span class="nav-text">quick find</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#quick-union"><span class="nav-number">1.2.3.</span> <span class="nav-text">quick union</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#improvements"><span class="nav-number">1.2.4.</span> <span class="nav-text">improvements</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Improvement-1-weighting"><span class="nav-number">1.2.4.1.</span> <span class="nav-text">Improvement 1: weighting</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Improvement-2-path-compression"><span class="nav-number">1.2.4.2.</span> <span class="nav-text">Improvement 2: path compression</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#applications"><span class="nav-number">1.2.5.</span> <span class="nav-text">applications</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Programming-Assignment-1"><span class="nav-number">1.2.6.</span> <span class="nav-text">Programming Assignment 1</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Analysis-of-Algorithms"><span class="nav-number">1.3.</span> <span class="nav-text">Analysis of Algorithms</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#observations"><span class="nav-number">1.3.1.</span> <span class="nav-text">observations</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#mathematical-models"><span class="nav-number">1.3.2.</span> <span class="nav-text">mathematical models</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#order-of-growth-classification"><span class="nav-number">1.3.3.</span> <span class="nav-text">order-of-growth classification</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#theory-of-algorithms"><span class="nav-number">1.3.4.</span> <span class="nav-text">theory of algorithms</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#memory"><span class="nav-number">1.3.5.</span> <span class="nav-text">memory</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Week-2"><span class="nav-number">2.</span> <span class="nav-text">Week 2</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Stacks-and-Queues"><span class="nav-number">2.1.</span> <span class="nav-text">Stacks and Queues</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#stacks"><span class="nav-number">2.1.1.</span> <span class="nav-text">stacks</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#resizing-arrays"><span class="nav-number">2.1.2.</span> <span class="nav-text">resizing arrays</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#queues"><span class="nav-number">2.1.3.</span> <span class="nav-text">queues</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#generics"><span class="nav-number">2.1.4.</span> <span class="nav-text">generics</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#iterators"><span class="nav-number">2.1.5.</span> <span class="nav-text">iterators</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#applications-1"><span class="nav-number">2.1.6.</span> <span class="nav-text">applications</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Programming-Assignment-2"><span class="nav-number">2.1.7.</span> <span class="nav-text">Programming Assignment 2</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Elementary-Sorts"><span class="nav-number">2.2.</span> <span class="nav-text">Elementary Sorts</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#rules-of-the-game"><span class="nav-number">2.2.1.</span> <span class="nav-text">rules of the game</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#selection-sort"><span class="nav-number">2.2.2.</span> <span class="nav-text">selection sort</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#insertion-sort"><span class="nav-number">2.2.3.</span> <span class="nav-text">insertion sort</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#shellsort"><span class="nav-number">2.2.4.</span> <span class="nav-text">shellsort</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#shuffling"><span class="nav-number">2.2.5.</span> <span class="nav-text">shuffling</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#convex-hull"><span class="nav-number">2.2.6.</span> <span class="nav-text">convex hull</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Week-3"><span class="nav-number">3.</span> <span class="nav-text">Week 3</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Mergesort"><span class="nav-number">3.1.</span> <span class="nav-text">Mergesort</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#mergesort"><span class="nav-number">3.1.1.</span> <span class="nav-text">mergesort</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#bottom-up-mergesort"><span class="nav-number">3.1.2.</span> <span class="nav-text">bottom-up mergesort</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#sorting-complexity"><span class="nav-number">3.1.3.</span> <span class="nav-text">sorting complexity</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#comparators"><span class="nav-number">3.1.4.</span> <span class="nav-text">comparators</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#stability"><span class="nav-number">3.1.5.</span> <span class="nav-text">stability</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Programming-Assignment-3"><span class="nav-number">3.1.6.</span> <span class="nav-text">Programming Assignment 3</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Quicksort"><span class="nav-number">3.2.</span> <span class="nav-text">Quicksort</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#quicksort"><span class="nav-number">3.2.1.</span> <span class="nav-text">quicksort</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#selection"><span class="nav-number">3.2.2.</span> <span class="nav-text">selection</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#duplicate-keys"><span class="nav-number">3.2.3.</span> <span class="nav-text">duplicate keys</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#system-sorts"><span class="nav-number">3.2.4.</span> <span class="nav-text">system sorts</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Week-4"><span class="nav-number">4.</span> <span class="nav-text">Week 4</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Priority-Queues"><span class="nav-number">4.1.</span> <span class="nav-text">Priority Queues</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#API-and-elementary-implementations"><span class="nav-number">4.1.1.</span> <span class="nav-text">API and elementary implementations</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#binary-heaps"><span class="nav-number">4.1.2.</span> <span class="nav-text">binary heaps</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#heapsort"><span class="nav-number">4.1.3.</span> <span class="nav-text">heapsort</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#event-driven-simulation"><span class="nav-number">4.1.4.</span> <span class="nav-text">event-driven simulation</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Programming-Assignment-4"><span class="nav-number">4.1.5.</span> <span class="nav-text">Programming Assignment 4</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Symbol-Tables"><span class="nav-number">4.2.</span> <span class="nav-text">Symbol Tables</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#API"><span class="nav-number">4.2.1.</span> <span class="nav-text">API</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#elementary-implementations"><span class="nav-number">4.2.2.</span> <span class="nav-text">elementary implementations</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ordered-operations"><span class="nav-number">4.2.3.</span> <span class="nav-text">ordered operations</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Binary-Search-Trees"><span class="nav-number">4.3.</span> <span class="nav-text">Binary Search Trees</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#BSTs"><span class="nav-number">4.3.1.</span> <span class="nav-text">BSTs</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ordered-operations-1"><span class="nav-number">4.3.2.</span> <span class="nav-text">ordered operations</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#deletion"><span class="nav-number">4.3.3.</span> <span class="nav-text">deletion</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Week-5"><span class="nav-number">5.</span> <span class="nav-text">Week 5</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Balanced-Search-Trees"><span class="nav-number">5.1.</span> <span class="nav-text">Balanced Search Trees</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-3-search-trees"><span class="nav-number">5.1.1.</span> <span class="nav-text">2-3 search trees</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#red-black-BSTs"><span class="nav-number">5.1.2.</span> <span class="nav-text">red-black BSTs</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#B-trees-Bayer-McCreight-1972"><span class="nav-number">5.1.3.</span> <span class="nav-text">B-trees (Bayer-McCreight, 1972)</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Geometric-Applications-of-BSTs"><span class="nav-number">5.2.</span> <span class="nav-text">Geometric Applications of BSTs</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1d-range-search"><span class="nav-number">5.2.1.</span> <span class="nav-text">1d range search</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#line-segment-intersection"><span class="nav-number">5.2.2.</span> <span class="nav-text">line segment intersection</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#kd-trees"><span class="nav-number">5.2.3.</span> <span class="nav-text">kd trees</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#interval-search-trees"><span class="nav-number">5.2.4.</span> <span class="nav-text">interval search trees</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#rectangle-intersection"><span class="nav-number">5.2.5.</span> <span class="nav-text">rectangle intersection</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Summary-Of-Geometric-Applications-of-BSTs"><span class="nav-number">5.2.6.</span> <span class="nav-text">Summary Of Geometric Applications of BSTs</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Programming-Assignment-5"><span class="nav-number">5.2.7.</span> <span class="nav-text">Programming Assignment 5</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Week-6"><span class="nav-number">6.</span> <span class="nav-text">Week 6</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Hash-Tables"><span class="nav-number">6.1.</span> <span class="nav-text">Hash Tables</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#hash-functions"><span class="nav-number">6.1.1.</span> <span class="nav-text">hash functions</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#seperate-chaining"><span class="nav-number">6.1.2.</span> <span class="nav-text">seperate chaining</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#linear-probing"><span class="nav-number">6.1.3.</span> <span class="nav-text">linear probing</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#context"><span class="nav-number">6.1.4.</span> <span class="nav-text">context</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Symbol-Table-Applications"><span class="nav-number">6.2.</span> <span class="nav-text">Symbol Table Applications</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#sets"><span class="nav-number">6.2.1.</span> <span class="nav-text">sets</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#dictionary-clients"><span class="nav-number">6.2.2.</span> <span class="nav-text">dictionary clients</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#indexing-clients"><span class="nav-number">6.2.3.</span> <span class="nav-text">indexing clients</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#sparse-vectors"><span class="nav-number">6.2.4.</span> <span class="nav-text">sparse vectors</span></a></li></ol></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Qingliu</span>

  

  
</div>



<div class="powered-by">
<i class="fa fa-user-md"></i><span id="busuanzi_container_site_uv">
    Number of visitors: <span id="busuanzi_value_site_uv"></span>
</span>
</div>


<!--
<span class="post-meta-divider">|</span>



  <div class="powered-by">Powered by <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> v3.8.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Mist</a> v6.5.0</div>



-->

<span class="post-meta-divider">|</span>

<div class="theme-info">
  <div class="powered-by"></div>
  <span class="post-count">Total 73.0k words</span>
</div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  

  
</div>









        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
          <span id="scrollpercent"><span>0</span>%</span>
        
      </div>
    

    
	
    

    
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>












  



  
    
      
  
  <script type="text/javascript" color="0,0,0" opacity="0.5" zindex="-1" count="99" src="/lib/canvas-nest/canvas-nest.min.js"></script>













  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=6.5.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.5.0"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=6.5.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=6.5.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.5.0"></script>



  



  









  <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
  <script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
   <script type="text/javascript">
        var gitalk = new Gitalk({
          clientID: '69ff68eec89b6cd91e37',
          clientSecret: '200633852bdb3579481b3fecee7178c1b98f471e',
          repo: 'gitalk-comments',
          owner: 'Aden-Q',
          admin: ['Aden-Q'],
          id: location.pathname,
          distractionFreeMode: 'true'
        })
        gitalk.render('gitalk-container')           
       </script>


  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  
  <script>
    
    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();

      Counter('get', '/classes/Counter', { where: JSON.stringify({ url }) })
        .done(function ({ results }) {
          if (results.length > 0) {
            var counter = results[0];
            
            Counter('put', `/classes/Counter/${counter.objectId}`, JSON.stringify({ time: { "__op":"Increment", "amount":1 } }))
            
            .done(function () {
                  var $element = $(document.getElementById(url));
                  $element.find('.leancloud-visitors-count').text(counter.time + 1);
            })
            
            .fail(function ({ responseJSON }) {
                console.log('Failed to save Visitor num, with error message: ' + responseJSON.error);
            })
          } else {
            
              Counter('post', '/classes/Counter', JSON.stringify({ title: title, url: url, time: 1}))
                .done(function () {
                  var $element = $(document.getElementById(url));
                  $element.find('.leancloud-visitors-count').text(1);
                })
                .fail(function () {
                  console.log('Failed to create');
                });
            
          }
        })
      .fail(function ({ responseJSON }) {
        console.log('LeanCloud Counter Error:' + responseJSON.code + " " + responseJSON.error);
      });
    }
    

    $(function() {
      $.get('https://app-router.leancloud.cn/2/route?appId=' + "TTkRYLVAOPvuxQuV5scOHl9U-gzGzoHsz")
        .done(function ({ api_server }) {
          var Counter = function (method, url, data) {
            return $.ajax({
              method: method,
              url: `https://${api_server}/1.1${url}`,
              headers: {
                'X-LC-Id': "TTkRYLVAOPvuxQuV5scOHl9U-gzGzoHsz",
                'X-LC-Key': "fCRGgKjo3tYIfbW3ygKrNCRN",
                'Content-Type': 'application/json',
              },
              data: data,
            });
          };
          
          addCount(Counter);
          
        })
    });
  </script>



  

  

  

  
  

  
  

  
    
      <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      },
      TeX: {equationNumbers: { autoNumber: "AMS" }}
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
      var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>
<script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

    
  


  
  

  

  

  

  

  

  


</body>
</html>
